/* CSSC.js | @version 1.0b |  m13p4 */
var CSSC=function(w){function t(){for(var c=arguments,a=1;a<c.length;a++)if(c[0]===c[a])return!0;return!1}function v(c,a){a=a[4];c='"'+a.style_id+'"/'+c.replace(/^.+?:/,function(a){return(a+"    ").slice(0,7)});a.view_err&&console.log(c);V.push(c)}function n(c,a){var b=Object.prototype.toString.call(c).split(/ |\]/)[1];"Number"!==b||a||(b=Math.floor(c)===c?3:4);return a?b:fa[b]||b}function N(c,a){for(var b in a)ha(c,b,{enumerable:!0,value:a[b]})}function B(c,a,b){var d=n(c),f=5===d,e=f&&c.match(/^0x[0-9a-f\.\+]+$/i);
if(e||isFinite(c)){b=(b[4].parse_unit_default||"px")+"";var g=c;e?(d=c.search(/\.|\+/),0>d?g=parseInt(c):(f=c.substr(d+1),g=parseInt(c.substr(0,d))+("+"===c.charAt(d)?parseFloat(f):parseInt(f,16)/Math.pow(16,f.length))),d=n(g)):f&&(g=parseFloat(c),d=n(g));e||/(^|-)color$/i.test(a)?(c=g,f=0,4===d&&(c=Math.floor(g),f=g-c),c=[(c&16711680)>>16,(c&65280)>>8,c&255].join(", "),c=0<f?"rgba("+c+", "+Math.floor(100*f)/100+")":"rgb("+c+")"):c=3===d?g+b:Math.floor(100*g)/100+b}else if(f&&-1<c.indexOf(" ")){c=
c.split(" ");for(d=0;d<c.length;d++)c[d]=B(c[d],a,b);c=c.join(" ")}else f&&"!"===c.charAt(c.length-1)&&(c=c.substr(0,c.length-1));return c}function D(c,a,b,d,f){b=b||2;b=5===n(b)?b:Array(parseInt(b)+1).join(" ");var e="",g,h=n(c),k=/\s*,\s*/g,l=/\s*(,|:)\s*/g;d=d||"";if(5===h)return c;if(7===h)for(h=0;h<c.length;h++)e+=D(c[h],a,b,d,!0);else for(g in c){var m=c[g];h=n(c[g]);if(t(h,7,8))if(f&&7===h){var p=D(c[g],a,b,d+b,f);""!==p&&(e=a?e+(g.replace(l,"$1")+"{"+p+"}"):e+(d+g.replace(k,",\n"+d)+" {\n"+
p+d+"}\n"))}else for(8===h&&(m=[c[g]]),h=0;h<m.length;h++)-1<C.indexOf(g)?e+=g+" "+m[h]+";"+(a?"":"\n"):(p=D(m[h],a,b,d+b,f),""!==p&&(e=a?e+(g.replace(l,"$1")+"{"+p+"}"):e+(d+g.replace(k,",\n"+d)+" {\n"+p+d+"}\n")));else e=-1<C.indexOf(g)?e+(g+" "+m+";"+(a?"":"\n")):a?e+(g+":"+m.trim().replace(k,",")+";"):e+((d.length<b.length?b:d)+g+": "+m+";\n")}return e}function W(c){if(/^@(namespace|import|charset)/.test(c))return c.replace(/(^@.*\s+|\s*;\s*$)/g,"");var a=c.replace(/(^.*?{\s*|\s*}\s*$)/g,"");
c=a.split(";");var b={};if(""!==a)for(a=0;a<c.length;a++)if(""!==c[a]){var d=c[a].split(":");b[d[0].trim()]=d.slice(1).join(":").trim()}return b}function X(c){var a=c.split("-"),b;c=a[0];for(b=1;b<a.length;b++)c+=a[b].charAt(0).toUpperCase()+a[b].substr(1);return c}function J(c){c=c.trim();if("@"!==c.charAt(0))return 1;c=c.substr(1);var a=c.indexOf(" ");-1<a&&(c=c.substr(0,a));return O[X(c)]||-1}function P(c,a){"@"===a.charAt(0)&&"@"===c.charAt(0)&&(a=a.substr(1));a="/"===a.charAt(0)?a.substr(1):
","===a.charAt(0)?", "+a.substr(1).trim():" "+a;if(0<=c.indexOf(",")||0<a.indexOf(",")){c=c.split(",");var b,d="",f=a.split(",");if(","!==a.charAt(0))for(b=0;b<c.length;b++)for(a=0;a<f.length;a++)d+=c[b]+f[a]+", ";else for(b=0;b<c.length;b++)d+=c[b]+a+", ";return d.replace(/,+\s*$/,"")}return c+a}function Y(c){var a=c.parentRule?c.parentRule:c.parentStyleSheet,b;for(b=0;b<a.cssRules.length;b++)if(a.cssRules[b]===c){a.deleteRule(b);break}}function E(c,a){c||(c="");for(var b=c.lastIndexOf("$"),d=0,
f,e,g,h,k,l,m=a[4].parse_vars_limit||100,p=a[3]||{};0<=b&&d<m;){d++;f=null;h=c.substr(b+1);a=h.search(/[^\w\.]/);a=0>a?c.length:a+b;k=c.substr(b+1,a-b);l=k.split(".");for(e=0;e<l.length;e++)if(!(1>l[e].length)){g=n(f);if(0===e&&l[e]in p)f=p[l[e]];else if(t(g,7,8)&&l[e]in f)f=f[l[e]];else if(5===g&&l[e].match(/^[0-9]+$/))f=f.charAt(l[e]);else{f="$"+k;break}if(9===n(f)){if("("===c.charAt(a+1)){a++;g=h=a;do g=c.indexOf("(",g+1),a=c.indexOf(")",a+1);while(-1<g&&g<a);0>a&&(a=c.length);h=c.substr(h+1,a-
h-1);h=h.trim().split(/\s*,\s*/);f=f.apply(null,h)}else f=f();if("."===c.charAt(a+1))for(a++,g=a,h=c.substr(a+1),a=h.search(/[^\w\.]/),h=h.substr(0,0>a?h.length:a),a=0>a?c.length:a+g,k=c.substr(b+1,a-b),h=h.split("."),g=0;g<h.length;g++)l.push(h[g])}}c=c.substr(0,b)+f+c.substr(a+1);a="$"+k===f?b:a+(f.length-1);if(0>--a)break;b=c.lastIndexOf("$",a)}return c}function Z(c,a,b){for(var d=0;d<a.length;d++)a[d]&&a[d].parentStyleSheet&&a[d].parentStyleSheet.ownerNode&&a[d].parentStyleSheet.ownerNode.id!==
c[4].style_id&&F(c,a[d],b)}function F(c,a,b,d){var f=a.cssText.substr(0,a.cssText.indexOf("{")).trim(),e=a.type,g=b?b.c:c[0],h=0,k=t(e,4,7,12);if(!t(e,1,5,4,7,8,6,12,10,3,2))return v('index:Unsuported "'+f+'" ['+e+"]",c);10===e&&(f=C[2]);3===e&&(f=C[1]);2===e&&(f=C[0]);b={_s:d||f,s:f,e:a,t:e,o:{},n:c[2]++,c:k?{}:!1,p:b||!1,io:!1,uo:!1,up:{}};g[f]?h=g[f].e.push(b)-1:g[f]={t:e,e:[b]};k?Z(c,a.cssRules,g[f].e[h]):g[f].e[h].o=W(a.cssText);return b}function x(c,a,b,d,f){var e="",g=!1;if(!f&&!c[1])if(y)c[1]=
!0;else{var h=c[4].style_id;if(w.getElementById(h))for(var k=0;10>k;k++)if(!w.getElementById(h+"-"+k)){h=h+"-"+k;break}w.getElementById(h)?v("create:can't create element.",c):(k=w.createElement("style"),k.setAttribute("type","text/css"),k.setAttribute("id",h),w.head.appendChild(k),c[1]=k,c[4].style_id=h)}h=f?f.e:c[1].sheet;if(b)if(k=n(b),8===k)for(var l in b)9===n(b[l])?(d=b[l](),e+=l+":"+B(d,l,c)+"; "):e+=l+":"+B(b[l],l,c)+"; ";else if(9===k)for(l in d=b(),d)e+=l+":"+B(d[l],l,c)+"; ";else e=b+":"+
B(d,l,c)+";";l=a+"{"+e+"}";-1<C.indexOf(a)&&(l=a+" "+b);if(y)return F(c,{cssText:l,type:J(a),cssRules:{},style:{}},f,a);try{var m=h.cssRules.length;"insertRule"in h?h.insertRule(l,m):"appendRule"in h?h.appendRule(l,m):"addRule"in h&&h.addRule(a,e,m);g=F(c,h.cssRules[m],f,a)}catch(p){v("create:"+(f?'"'+f.s+'" > ':"")+'"'+a+'" -> '+p,c)}return g||F(c,{cssText:l,type:J(a),placeholder:!0,cssRules:{},style:{}},f,a)}function aa(c,a,b){if(c&&c[a]){var d=b?c[a].e.indexOf(b):-1;b?0<=d&&(c[a].e.splice(d,1),
0>=c[a].e.length&&delete c[a]):delete c[a]}}function G(c,a,b){var d=n(a),f=7===n(c)?c[0]:c;if(5===d)return a=E(a,c),b?f[a]?f[a].e:[]:z(c,f[a]?f[a].e:[],a);if(6===d){d=[];for(var e in f)if(e.match(a))for(g=0;g<f[e].e.length;g++)d.push(f[e].e[g]);return b?d:z(c,d,a)}if(7===d){d=[];var g;for(g=0;g<a.length;g++){var h=E(a[g],c);if(f[h])for(e=0;e<f[h].e.length;e++)d.push(f[h].e[e])}return b?d:z(c,d,a)}if(t(d,1,2)){d=[];for(e in f)for(g=0;g<f[e].e.length;g++)d.push(f[e].e[g]);return b?d:z(c,d,a)}}function H(c,
a,b,d){var f=n(a);if(t(f,5,6,7,1,2))return G(c,a,b);K(c,a);return d}function K(c,a,b,d){var f,e,g={},h=/^@(media|keyframes|supports)/;7!==n(a)&&(a=[a]);if(!d&&!b){var k=!1;for(e=0;e<u.length;e++)for(f=0;f<a.length;f++)if(u[e]in a[f]){k=!0;d=g[u[e]];var l=a[f][u[e]];l=7===n(l)?l:[l];g[u[e]]=d?d.concat(l):l}k&&K(c,g,b,k)}for(f=0;f<a.length;f++)for(m in d=a[f],d)if(!(m in g)){l=7===n(d[m])?d[m]:[d[m]];var m=E(m,c);for(e=0;e<l.length;e++)if("@"===m.charAt(0))if(-1<u.indexOf(m))x(c,m,l[e],null,b);else if(b&&
t(b.t,4,7,12)||h.test(m)){var p=m;(k=b)&&!m.match(h)&&(m=P(b._s,m),k=b.p);k=x(c,m,null,null,k);k&&k.s===k._s||(k&&(Y(k.e),aa(k.p?k.p:c[0],k.s,k)),k={cssText:m+" {}",placeholder:!0,type:J(m),cssRules:{}},k=F(c,k,k.p,m));K(c,l[e],k);b&&(k.io=!0,b.o[p]||(b.o[p]=[]),b.o[p].push(k))}else v('import:Unsuported "'+m+'" ['+J(m)+"]",c);else t(n(l[e]),5,4,3)?(k=b?b.c:c[0],k["*"]||x(c,"*",null,null,b),r(c,[k["*"].e[0]],m,l[e])):(k=x(c,m,null,null,b))&&r(c,[k],l[e])}}function r(c,a,b,d,f,e){if(3===n(f)){if(t(a[f].t,
2,3,10,5))return v('set:Readonly rule "'+a[f].s+'" ['+a[f].t+"]",c);b=E(b,c);if(a[f].c)r(c,G(a[f].c,null,!0),b,d,!1,e);else{var g=n(d),h;if(t(g,8,7)){var k="@"===b.charAt(0);var l=8===g?[d]:d,m=P(a[f].s,b);!e&&k&&(m=a[f].p?P(a[f].p.s,b):b);for(h=0;h<l.length;h++)e&&7===n(a[f].o[b])?r(c,a[f].o[b],l[h],!1,!1,e):(g=x(c,m,null,null,k?!1:a[f].p),!e&&g&&(k&&(d=g,(g=x(c,a[f].s,null,null,g))||(g=d)),r(c,[g],l[h],!1,!1,e),k&&a[f].p&&(d=a[f].p,7!==n(d.o[b])&&(d.o[b]=[]),d.o[b].push(g.p)),g.io=!0,7!==n(a[f].o[b])&&
(a[f].o[b]=[]),a[f].o[b].push(g)))}else if(9===g)try{l=d(b,I(c,[a[f]],b)),r(c,a,b,l,f,e),e||(a[f].up[b]=d)}catch(p){v("set:"+p,c)}else{k=B(d,b,c);if(b in c[5])for(d=0;d<c[5][b].length;d++)r(c,a,c[5][b][d],k,f,e);if(!y){if(b in L)for(d=0;d<L[b].length;d++){if(L[b][d]in a[f].e.style){h=L[b][d];break}}else h=X(b);h!==b&&(a[f].e.style[h]=k);a[f].e.style[b]=k}a[f].o[b]=k}}}else if(g=n(b),7===g)for(h=0;h<b.length;h++)if(a.length>h)r(c,[a[h]],b[h]);else break;else for(h=0;h<a.length;h++)if(8===g)for(k in b)r(c,
a,k,b[k],h,e);else if(9===g){f=b(a[h].s,I(c,[a[h]])[a[h].s]);for(k in f)r(c,a,k,f[k],h,e);e||(a[h].uo=b)}else r(c,a,b,d,h,e)}function I(c,a,b,d){if(!b)return A(c,a,3);var f=d?[]:"",e;for(e=0;e<a.length;e++){var g="";a[e].o[b]&&(g=a[e].o[b],7===n(g)&&(g=A(c,g,3)));y||(g||(g=a[e].e.style[b]),g||(g=(g=a[e].e.cssText.match(new RegExp(b+"s*:s*(.+?);")))?g[1].trim():""));g&&(d?f.push(g):f=g)}return f}function A(c,a,b,d){3!==n(b)&&(b=ia[b]||3);var f={},e,g,h,k,l=b,m={},p=t(b,1,2);p&&(l=5);for(e=0;e<a.length;e++)if(d||
3!==b||!a[e].io){if(t(a[e].t,2,3,10))var q=a[e].o;else for(h in q=M({},a[e].o),a[e].o)if(7===n(a[e].o[h]))if(3!==b)q[h]=null,delete q[h];else{q[h]=[];for(g=0;g<a[e].o[h].length;g++)(k=A(c,[a[e].o[h][g]],b,!0)[a[e].o[h][g].s])&&0<ba(k).length&&q[h].push(k);0===q[h].length?delete q[h]:1===q[h].length&&(q[h]=q[h][0])}else 1!==b&&2!==b&&isFinite(a[e].o[h])&&(q[h]+="!");a[e].c&&(q=M(A(c,G(a[e].c,null,!0),l),q));1>ba(q).length||(p?(k={},k[a[e].s]=q,f[a[e].n]=D(k,2===b,c[4].parse_tab)):4===b?(f[a[e].n]=
{},f[a[e].n][a[e].s]=q):(f[a[e].s]?(7!==n(f[a[e].s])&&(f[a[e].s]=[f[a[e].s]]),f[a[e].s].push(q)):f[a[e].s]=q,m[a[e].s]=m[a[e].s]>a[e].n?m[a[e].s]:a[e].n))}if(p){k="";for(e in f)k+=f[e];return k}if(4===b)return ja(f);c={};a={};for(e in m)0>u.indexOf(e)&&(a[m[e]]=e);for(e=0;e<u.length;e++)f[u[e]]&&(c[u[e]]=f[u[e]]);for(e in a)c[a[e]]=f[a[e]];return c}function ca(c,a){var b,d;for(b=0;b<a.length;b++){if(!1!==a[b].uo){var f=a[b].uo(a[b].s,I(c,[a[b]])[a[b].s]);for(d in f)r(c,a,d,f[d],b,!0)}if(a[b].c)ca(c,
G(a[b].c,null,!0));else for(d in a[b].up)r(c,a,d,a[b].up[d](d,I(c,[a[b]],d)),b,!0)}}function Q(c,a,b,d){var f=t(n(b),1,2),e,g=[];for(e=0;e<a.length;e++)a[e].c&&Q(c,G(a[e].c,null,!0),b,d),f?(Y(a[e].e),aa(a[e].p?a[e].p:c[0],a[e].s,a[e])):(g.push(a[e]),y||(a[e].e.style[b]=""),a[e].o[b]&&(7===n(a[e].o[b])&&Q(c,a[e].o[b]),delete a[e].o[b]));d&&(d.e=R(c,g))}function S(c,a,b,d,f){0>b&&(b+=a.length);return a[b]?z(c,[a[b]],d,!1,a[b].p||!1):z(c,[],d,!1,f)}function R(c,a){for(var b=[],d=0;d<a.length;d++)a[d].e&&
b.push(y||a[d].e.placeholder?A(c,[a[d]],3):a[d].e);return b}function da(c,a,b,d){var f=n(a);if(8===f)M(c,a);else if(5===f){if(2===n(b))return c[a];c[a]=b}else{if(7===f){b={};for(d=0;d<a.length;d++)b[a[d]]=c[a[d]];return b}if(2===f)return c}return d}function z(c,a,b,d,f){function e(){if(1>a.length&&!d&&5===n(b)){var e,k=[],l,m=f?f:[null];for(l=0;l<m.length;l++)(e=x(c,b,null,null,m[l]))&&k.push(e);a=k;g.e=R(c,a);g.selector=1===a.length?a[0].s:b}}var g=function(b){var d,f,g=[];e();for(d=0;d<a.length;d++)if(a[d].c){var h=
H(a[d].c,b,!0);for(f=0;f<h.length;f++)g.push(h[f])}return z(c,g,b,null,a)};g.e=R(c,a);g.selector=1===a.length?a[0].s:b;N(g,{set:function(b,d){e();r(c,a,b,d);return g},get:function(b,d){return I(c,a,b,d)},update:function(){ca(c,a);return g},"delete":function(b){Q(c,a,b,g);return g},"export":function(b){return A(c,a,b)},parse:function(b){return A(c,a,b?2:1)},pos:function(d){return S(c,a,d,b,f)},first:function(){return S(c,a,0,b,f)},last:function(){return S(c,a,-1,b,f)}});return g}function T(){var c=
[{},!1,0,{},{},{}],a=function(b){try{return H(c,b,!1,a)}catch(d){v("CSSC:"+d,c)}};N(a,{version:"1.0.0",init:function(b){b=7===n(b)?b:[b];for(var d=0;d<b.length;d++){var f=!1;var e=n(b[d],1);if(b[d]){b[d]=b[d].sheet||b[d];e=b[d].href||e;try{f=b[d].cssRules||f}catch(h){e+='" -> "'+h}if(!f&&9===n(b[d])){if(b[d].e&&7===n(b[d].e)){f=b[d].e;var g="handler"}else"1.0.0"===b[d].version&&b[d].type===O?(f=b[d]().e,g="ID:"+b[d].conf().style_id):g=b[d].name;e=(f?"CSSC":e)+"["+g+"]"}}f&&0<f.length?Z(c,f,null):
v("init:Can't init from \""+e+'"',c)}return a},"import":function(b){K(c,b);return a},"export":function(a){return H(c).export(a)},parse:function(a){return H(c).parse(a)},update:function(b){H(c,b).update();return a},"new":function(){return T()},alias:function(b,d){var f=c[5],e=n(b),g;5===e&&(e={},e[b]=d,b=e,e=8);if(8===e)for(g in b)for(e=b[g],7!==n(e)&&(e=[e]),(g in f)||(f[g]=[]),d=0;d<e.length;d++)f[g].push(e[d]);return a},conf:function(b,d){return da(c[4],b,d,a)},vars:function(b,d){return da(c[3],
b,d,a)},parseVars:function(a,d){return E(a,[,,,d?M({},c[3],d):c[3],c[4]])},objFromCss:function(a){return W(a)},cssFromObj:function(a,c,f){return D(a,c,f)},_conf:ea,type:O,type_export:ka,messages:V});return a.conf(ea)}var u=["@charset","@import","@namespace","@font-face"],C=u.slice(0,3),V=[],fa={Null:1,Undefined:2,Integer:3,Float:4,String:5,RegExp:6,Array:7,Object:8,Function:9},y=8===n(w),L={float:["cssFloat"]},M=9===n(Object.assign)?Object.assign:function(){var c,a,b=arguments;for(a=1;a<b.length;a++)for(c in b[a])b[0][c]=
b[a][c];return b[0]},ha=9===n(Object.defineProperty)?Object.defineProperty:function(c,a,b){c[a]=b.value},la=9===n(Object.preventExtensions),U=9===n(Object.freeze)?Object.freeze:function(c){var a={};N(a,c);c=a;la&&Object.preventExtensions(c);return c},ba=9===n(Object.keys)?Object.keys:function(c){var a=[],b;for(b in c)a.push(b);return a},ja=9===n(Object.values)?Object.values:function(c){var a=[],b;for(b in c)a.push(c[b]);return a},O=U({rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,
keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,viewport:15}),ia={css:1,min:2,obj:3,object:3,arr:4,array:4,objNMD:5},ka=U({css:"css",min:"min",obj:"obj",arr:"arr",object:"object",notMDObject:"objNMD",array:"array"}),ea=U({style_id:"cssc-style",view_err:!0,parse_tab:2,parse_unit_default:"px",parse_vars_limit:100});if(y)w.exports=T();else return T()}("undefined"===typeof module?document:module);
