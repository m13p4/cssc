/*
@version 1.0b
@author m13p4
@copyright Meliantchenkov Pavel
*/
var _debug=!0,csscDebug={},CSSC=function(){var t;_debug&&(csscDebug.ownElem=t);var v=function(p,v){var m={},w=!1,h=null;_debug&&(csscDebug.index=m);var y=function(){if(!w){if("cssRules"in p)x(p.cssRules);else if("length"in p)for(var a=0;a<p.length;a++)"true"!==p[a].ownerNode.getAttribute("data-cssc-ignore")&&x(p[a].cssRules);w=!0}},x=function(a,c){for(var d=0;d<a.length;d++)l.isElemInOwnNode(a[d])||A(a[d],c)},A=function(a,c){var d=a.cssText.substr(0,a.cssText.indexOf("{")).trim(),b=a.type,e=c?c:m;
if(b!==h.ruleType.rule&&b!==h.ruleType.fontFace&&b!==h.ruleType.media&&b!==h.ruleType.keyframes&&b!==h.ruleType.keyframe&&b!==h.ruleType.page&&b!==h.ruleType.supports)console.log("unsuported type: ["+b+"] - "+h.ruleType.names[b]);else{a._update=!1;b===h.ruleType.rule&&(a.style._update={});c={indexElem:a,children:!1,parent:c?c:!1,events:{},type:b};e[d]?(e[d].content[0].indexElem===a&&(console.log('Dublicate "'+d+'": '),console.log(Error().stack+"\n\n")),c=e[d].content.push(c)-1):(e[d]={type:b,content:[c],
events:{}},c=0);if(b===h.ruleType.media||b===h.ruleType.keyframes)e[d].content[c].children={},x(a.cssRules,e[d].content[c].children,!1);return e[d]}},r=function(a,c,d,b,e){b||t||l.createNewStyleElem();b=b?b:t.sheet;var g=b.cssRules.length,k="";if(c){var f=l.elemType(c);if("Object"===f)for(var q in c)"Function"===l.elemType(c[q])?(d=c[q](),k+=q+":"+d+"; "):k+=q+":"+c[q]+"; ";else if("Function"===f)for(q in d=c(),d)k+=q+":"+d[q]+"; ";else k=c+":"+d+";"}try{return"insertRule"in b?b.insertRule(a+"{"+
k+"}",g):"appendRule"in b?b.appendRule(a+"{"+k+"}",g):"addRule"in b&&b.addRule(a,k,g),A(b.cssRules[g],e)}catch(D){console.log('"'+a+'" -> '+D)}return!1},B=function(a,c){w||y();c=c?c:m;return c[a]?c[a]:null},u=function(a,c,d){c=c?c:m;var b=l.elemType(a);if("String"===b)return c=B(a,c),d?c?c.content:[]:n(c?c.content:[],a);if("RegExp"===b){b=[];for(var e in c)if(e.match(a))for(g=0;g<c[e].content.length;g++)b.push(c[e].content[g]);return d?b:n(b,a)}if("Array"===b){b=[];var g;for(g=0;g<a.length;g++){var k=
B(a[g],c);if(null!==k)for(e=0;e<k.content.length;e++)b.push(k.content[e])}return d?b:n(b,a)}if("Null"===b||"Undefined"===b){b=[];for(e in c)for(g=0;g<c[e].content.length;g++)b.push(c[e].content[g]);return d?b:n(b,a)}return null},C=function(a,c,d,b){var e=l.elemType(a);if("String"===e||"RegExp"===e||"Array"===e||"Null"===e||"Undefined"===e)return a=u(a,d,b),c?a.has(c):a;h.import(a)},n=function(a,c,d,b){var e=function(a,c){var f,b,g=[];for(f=0;f<e.e.length;f++)if(e.e[f].children){var k=C(a,c,e.e[f].children,
!0);for(b=0;b<k.length;b++)g.push(k[b])}return n(g,a,null,e.e)};e.e=a;e.eLength=a.length;e.set=function(a,k,f){if("number"===typeof f){if(this.e[f].indexElem.type===h.ruleType.fontFace)return console.log('Element of Type "'+h.ruleType.names[this.e[f].indexElem.type]+'" is readonly.'),this;if(this.e[f].children)u(null,this.e[f].children).set(a,k);else if("Function"===l.elemType(k)){var g=l.findPropInCssText(this.e[f].indexElem.cssText,a);g=k(g);this.e[f].indexElem.style[a]=l.parseValue(g);this.e[f].indexElem.style._update[a]=
k}else this.e[f].indexElem.style[a]=l.parseValue(k)}else{var e,z,m=l.elemType(a);"Object"===m?g=Object.keys(a).length:"Function"===m&&(z=a());if(0>=this.e.length&&!d&&"String"===l.elemType(c)){var n,p=[];if(b)for(p=[],f=0;f<b.length;f++){if(n=r(c,null,null,b[f].indexElem,b[f].children))for(e=0;e<n.content.length;e++)p.push(n.content[e])}else if(n=r(c,null,null))p=n.content;this.e=p;this.eLength=p.length}for(f=0;f<this.e.length;f++)if("Object"===m&&0<g)for(e in a)this.set(e,a[e],f);else if("Function"===
m){for(e in z)this.set(e,z[e],f);this.e[f].indexElem._update=a}else this.set(a,k,f)}return this};e.get=function(a,c){var f=[],b="",d,g;c=!!c;for(g=0;g<this.e.length;g++)(d=this.e[g].indexElem.style[a])&&""!==d||(d=l.findPropInCssText(this.e[g].indexElem.cssText,a)),d&&(b=d,c&&f.push(b));return c?f:b};e.has=function(a){var b=[];var f=l.elemType(a);if("String"===f){var d=a.split(":");for(f=0;f<this.e.length;f++){var g=l.findPropInCssText(this.e[f].indexElem.cssText,d[0]);""!==g&&(!d[1]||d[1]&&d[1].replace(/ |;/g,
"")===g)&&b.push(this.e[f])}}else if("Array"===f)for(var e=0;e<a.length;e++)for(d=a[e].split(":"),f=0;f<this.e.length;f++)g=l.findPropInCssText(this.e[f].indexElem.cssText,d[0]),""!==g&&(!d[1]||d[1]&&d[1].replace(/ |;/g,"")===g)&&b.push(this.e[f]);else if("RegExp"===f)for(f=0;f<this.e.length;f++)if(d=this.e[f].indexElem.cssText.match(/[\S]+:.+?;/g))for(e=0;e<d.length;e++)(g=d[e].match(a))&&b.push(this.e[f]);return n(b,c,!0)};e.update=function(){var a,c;for(a=0;a<this.e.length;a++){if(!1!==this.e[a].indexElem._update){var b=
this.e[a].indexElem._update();for(c in b)this.set(c,b[c],a)}if(this.e[a].children)u(null,this.e[a].children).update();else for(c in this.e[a].indexElem.style._update)b=this.e[a].indexElem.style._update[c](),this.set(c,b,a)}return this};e.delete=function(a){var b;if("undefined"===typeof a)for(b=0;b<this.e.length;b++){this.e[b].indexElem.parentRule?this.e[b].indexElem.parentRule.deleteRule(this.e[b]):this.e[b].indexElem.parentStyleSheet.deleteRule(this.e[b]);var d=this.e[b].parent?this.e[b].parent:
null;d=d?d:m;d[c]&&delete d[c];this.e[b].children&&(d=u(null,this.e[b].children),d.delete(a))}else for(b=0;b<this.e.length;b++)this.e[b].indexElem.style[a]="",this.e[b].children&&(d=u(null,this.e[b].children),d.delete(a));return this};e.export=function(a){var b="",c;for(c=0;c<this.e.length;c++)b+=l.exportParser(this.e[c].indexElem.cssText,a);return b.trim()};return e},l={elemType:function(a,c){return c?Object.prototype.toString.call(a):Object.prototype.toString.call(a).replace(/(^\[.+\s|\]$)/g,"")},
createNewStyleElem:function(){if(document.getElementById(h.conf.styleId)){for(var a=0;10>a;a++)if(!document.getElementById(h.conf.styleId+"-"+a)){h.conf.styleId=h.conf.styleId+"-"+a;break}if(document.getElementById(h.conf.styleId))throw Error("cann not create new element..");}a=document.createElement("style");a.setAttribute("type","text/css");a.setAttribute("id",h.conf.styleId);a.appendChild(document.createTextNode(""));document.head.appendChild(a);t=a;_debug&&(csscDebug.ownElem=t)},isElemInOwnNode:function(a){return a&&
!!a.parentStyleSheet&&!!a.parentStyleSheet.ownerNode&&a.parentStyleSheet.ownerNode.id===h.conf.styleId},parseValue:function(a){if(isFinite(a))return 0===a%1?a+"px":Math.floor(100*a)/100+"px";var c=a.split(" ");if(0<c.length){for(var d=0;d<c.length;d++)isFinite(c[d])&&(a=c[d],c[d]=0===a%1?a+"px":Math.floor(100*a)/100+"px");return c.join(" ")}return a},findPropInCssText:function(a,c){return(a=a.match(new RegExp(c+"s*:s*(.+?);")))?a[1].trim():""},exportParser:function(a,c){return c===h.export.type.ruleRow?
a.replace(/\n/g,"")+"\n":c===h.export.type.min?a.replace(/(;|:|\s*?{|}|,)\s+/g,function(a){return a.trim()}):a.match(/^@(media|keyframes)/)?a.replace(/^(.*){([\s\S]*)}$/,function(a,b,c){return b+"\n{\n    "+c.trim().replace(/({|}|;)\s*/g,function(a){a=a.trim();if("{"===a)return"\n    {\n        ";if("}"===a)return"}\n    ";if(";"===a)return";\n        "}).replace(/\s+}/g,"\n    }").trim()+"\n}\n"}):a.replace(/({|}|;)\s*/g,function(a){a=a.trim();if("{"===a)return"\n"+a+"\n    ";if("}"===a)return a+
"\n";if(";"===a)return a+"\n    "}).replace(/\s+}/,"\n}")}};h=function(a,c){return C(a,c)};h.import=function(a){var c,d,b,e,g,h;for(d in a){var f="Array"===l.elemType(a[d])?a[d]:[a[d]];for(b=0;b<f.length;b++)if("@font-face"===d)r(d,f[b],null);else if(d.match(/^@(media|keyframes|supports)/)){if(c=r(d,null,null)){n(c.content,d);var m=c.content.length-1;for(h in f[b]){var p="Array"===l.elemType(f[b][h])?f[b][h]:[f[b][h]];for(e=0;e<p.length;e++)if(g=r(h,null,null,c.content[m].indexElem,c.content[m].children))g=
n(g.content,h),g.set(p[e])}}}else if(c=r(d,null,null))c=n(c.content,d),c.set(f[b])}};h.export=function(a){var c="",d,b;for(d in m)for(b=0;b<m[d].content.length;b++)c+=l.exportParser(m[d].content[b].indexElem.cssText,a);return c.trim()};h.update=function(a){if(a)a=h(a),a.update();else for(var c in m)a=n(m[c].content),a.update()};h.ruleType={rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,names:{1:"rule",2:"charset",
3:"import",4:"media",5:"fontFace",6:"page",7:"keyframes",8:"keyframe",10:"namespace",11:"counterStyle",12:"supports",14:"fontFeatureValues"}};h.events={beforeChange:"beforechange",change:"change",beforeSet:"beforeset",set:"set",beforeCreate:"beforecreate",create:"create",beforeDelete:"beforedelete","delete":"delete",beforeDestroy:"beforedestroy",destroy:"destroy"};h.export.type={normal:"normal",ruleRow:"ruleRow",min:"min"};h.conf={styleId:"cssc-style"};v?y():window.addEventListener("load",function(){y()});
return h};_debug&&(csscDebug.cntrl=v);return v(document.styleSheets,!0)}();
