/* CSSC.js | @version 1.0b |  m13p4 */
var CSSC=function(v){function u(c,a){a=a[4];c='"'+a.style_id+'"/'+c.replace(/^.+?:/,function(a){return(a+"    ").slice(0,7)});a.view_err&&console.log(c);U.push(c)}function n(c,a){var b=Object.prototype.toString.call(c).split(/ |\]/)[1];"Number"===b&&(b=Math.floor(c)===c?"Integer":"Float");return a?b:ea[b]||b}function M(c,a){for(var b in a)fa(c,b,{enumerable:!0,value:a[b]})}function A(c,a,b){var d=n(c),g=5===d,f=g&&c.match(/^0x[0-9a-f\.\+]+$/i);if(f||isFinite(c)){b=(b[4].parse_unit_default||"px")+
"";var e=c;f?(d=c.search(/\.|\+/),0>d?e=parseInt(c):(g=c.substr(d+1),e=parseInt(c.substr(0,d))+("+"===c.charAt(d)?parseFloat(g):parseInt(g,16)/Math.pow(16,g.length))),d=n(e)):g&&(e=parseFloat(c),d=n(e));f||/(^|-)color$/i.test(a)?(c=e,g=0,4===d&&(c=Math.floor(e),g=e-c),c=[(c&16711680)>>16,(c&65280)>>8,c&255].join(", "),c=0<g?"rgba("+c+", "+Math.floor(100*g)/100+")":"rgb("+c+")"):c=3===d?e+b:Math.floor(100*e)/100+b}else if(g&&-1<c.indexOf(" ")){c=c.split(" ");for(d=0;d<c.length;d++)c[d]=A(c[d],a,b);
c=c.join(" ")}else g&&"!"===c.charAt(c.length-1)&&(c=c.substr(0,c.length-1));return c}function C(c,a,b,d,g){b=5===n(b)?b:Array((parseInt(b)||2)+1).join(" ");var f="",e,h=n(c),k=/\s*,\s*/g,l=/\s*(,|:)\s*/g;d=d||"";if(5===h)return c;if(7===h)for(h=0;h<c.length;h++)f+=C(c[h],a,b,d,!0);else for(e in c){var m=""+c[e];h=n(c[e]);if(7===h||8===h)if(g&&7===h){var p=C(c[e],a,b,d+b,g);""!==p&&(f=a?f+(e.replace(l,"$1")+"{"+p+"}"):f+(d+e.replace(k,",\n"+d)+" {\n"+p+d+"}\n"))}else for(8===h&&(m=[c[e]]),h=0;h<m.length;h++)-1<
B.indexOf(e)?f+=e+" "+m[h]+";"+(a?"":"\n"):(p=C(m[h],a,b,d+b,g),""!==p&&(f=a?f+(e.replace(l,"$1")+"{"+p+"}"):f+(d+e.replace(k,",\n"+d)+" {\n"+p+d+"}\n")));else f=-1<B.indexOf(e)?f+(e+" "+m+";"+(a?"":"\n")):a?f+(e+":"+m.trim().replace(k,",")+";"):f+((d.length<b.length?b:d)+e+": "+m+";\n")}return f}function V(c){if(/^@(namespace|import|charset)/.test(c))return c.replace(/(^@.*\s+|\s*;\s*$)/g,"");var a=c.replace(/(^.*?{\s*|\s*}\s*$)/g,"");c=a.split(";");var b={};if(""!==a)for(a=0;a<c.length;a++)if(""!==
c[a]){var d=c[a].split(":");b[d[0].trim()]=d.slice(1).join(":").trim()}return b}function W(c){var a=c.split("-"),b;c=a[0];for(b=1;b<a.length;b++)c+=a[b].charAt(0).toUpperCase()+a[b].substr(1);return c}function I(c){c=c.trim();if("@"!==c.charAt(0))return 1;c=c.substr(1);var a=c.indexOf(" ");-1<a&&(c=c.substr(0,a));return N[W(c)]||-1}function O(c,a){"@"===a.charAt(0)&&"@"===c.charAt(0)&&(a=a.substr(1));a="/"===a.charAt(0)?a.substr(1):","===a.charAt(0)?", "+a.substr(1).trim():" "+a;if(0<=c.indexOf(",")||
0<a.indexOf(",")){c=c.split(",");var b,d="",g=a.split(",");if(","!==a.charAt(0))for(b=0;b<c.length;b++)for(a=0;a<g.length;a++)d+=c[b]+g[a]+", ";else for(b=0;b<c.length;b++)d+=c[b]+a+", ";return d.replace(/,+\s*$/,"")}return c+a}function X(c){var a=c.parentRule?c.parentRule:c.parentStyleSheet,b;for(b=0;b<a.cssRules.length;b++)if(a.cssRules[b]===c){a.deleteRule(b);break}}function D(c,a){c||(c="");for(var b=c.lastIndexOf("$"),d=0,g,f,e,h,k,l,m=a[4].parse_vars_limit||100,p=a[3]||{};0<=b&&d<m;){d++;g=
null;h=c.substr(b+1);a=h.search(/[^\w\.]/);a=0>a?c.length:a+b;k=c.substr(b+1,a-b);l=k.split(".");for(f=0;f<l.length;f++)if(!(1>l[f].length)){e=n(g);if(0===f&&l[f]in p)g=p[l[f]];else if((7===e||8===e)&&l[f]in g)g=g[l[f]];else if(5===e&&l[f].match(/^[0-9]+$/))g=g.charAt(l[f]);else{g="$"+k;break}if(9===n(g)){if("("===c.charAt(a+1)){a++;e=h=a;do e=c.indexOf("(",e+1),a=c.indexOf(")",a+1);while(-1<e&&e<a);0>a&&(a=c.length);h=c.substr(h+1,a-h-1);h=h.trim().split(/\s*,\s*/);g=g.apply(null,h)}else g=g();if("."===
c.charAt(a+1))for(a++,e=a,h=c.substr(a+1),a=h.search(/[^\w\.]/),h=h.substr(0,0>a?h.length:a),a=0>a?c.length:a+e,k=c.substr(b+1,a-b),h=h.split("."),e=0;e<h.length;e++)l.push(h[e])}}c=c.substr(0,b)+g+c.substr(a+1);a="$"+k===g?b:a+(g.length-1);if(0>--a)break;b=c.lastIndexOf("$",a)}return c}function Y(c,a,b){for(var d=0;d<a.length;d++)a[d]&&a[d].parentStyleSheet&&a[d].parentStyleSheet.ownerNode&&a[d].parentStyleSheet.ownerNode.id!==c[4].style_id&&E(c,a[d],b)}function E(c,a,b,d){var g=a.cssText.substr(0,
a.cssText.indexOf("{")).trim(),f=a.type,e=b?b.c:c[0],h=0,k=4===f||7===f||12===f;if(1!==f&&5!==f&&4!==f&&7!==f&&8!==f&&6!==f&&12!==f&&10!==f&&3!==f&&2!==f)return u('index:Unsuported "'+g+'" ['+f+"]",c);10===f&&(g=B[2]);3===f&&(g=B[1]);2===f&&(g=B[0]);b={_s:d||g,s:g,e:a,t:f,o:{},n:c[2]++,c:k?{}:!1,p:b||!1,io:!1,uo:!1,up:{}};e[g]?h=e[g].e.push(b)-1:e[g]={t:f,e:[b]};k?Y(c,a.cssRules,e[g].e[h]):e[g].e[h].o=V(a.cssText);return b}function w(c,a,b,d,g){var f="",e=!1;if(!g&&!c[1])if(x)c[1]=!0;else{var h=c[4].style_id;
if(v.getElementById(h))for(var k=0;10>k;k++)if(!v.getElementById(h+"-"+k)){h=h+"-"+k;break}v.getElementById(h)?u("create:can't create element.",c):(k=v.createElement("style"),k.setAttribute("type","text/css"),k.setAttribute("id",h),v.head.appendChild(k),c[1]=k,c[4].style_id=h)}h=g?g.e:c[1].sheet;if(b)if(k=n(b),8===k)for(var l in b)9===n(b[l])?(d=b[l](),f+=l+":"+A(d,l,c)+"; "):f+=l+":"+A(b[l],l,c)+"; ";else if(9===k)for(l in d=b(),d)f+=l+":"+A(d[l],l,c)+"; ";else f=b+":"+A(d,l,c)+";";l=a+"{"+f+"}";
-1<B.indexOf(a)&&(l=a+" "+b);if(x)return E(c,{cssText:l,type:I(a),cssRules:{},style:{}},g,a);try{var m=h.cssRules.length;"insertRule"in h?h.insertRule(l,m):"appendRule"in h?h.appendRule(l,m):"addRule"in h&&h.addRule(a,f,m);e=E(c,h.cssRules[m],g,a)}catch(p){u("create:"+(g?'"'+g.s+'" > ':"")+'"'+a+'" -> '+p,c)}return e||E(c,{cssText:l,type:I(a),placeholder:!0,cssRules:{},style:{}},g,a)}function Z(c,a,b){if(c&&c[a]){var d=b?c[a].e.indexOf(b):-1;b?0<=d&&(c[a].e.splice(d,1),0>=c[a].e.length&&delete c[a]):
delete c[a]}}function F(c,a,b){var d=n(a),g=7===n(c)?c[0]:c;if(5===d)return a=D(a,c),b?g[a]?g[a].e:[]:y(c,g[a]?g[a].e:[],a);if(6===d){d=[];for(var f in g)if(f.match(a))for(e=0;e<g[f].e.length;e++)d.push(g[f].e[e]);return b?d:y(c,d,a)}if(7===d){d=[];var e;for(e=0;e<a.length;e++){var h=D(a[e],c);if(g[h])for(f=0;f<g[h].e.length;f++)d.push(g[h].e[f])}return b?d:y(c,d,a)}if(1===d||2===d){d=[];for(f in g)for(e=0;e<g[f].e.length;e++)d.push(g[f].e[e]);return b?d:y(c,d,a)}}function G(c,a,b,d){var g=n(a);if(-1<
[5,6,7,1,2].indexOf(g))return F(c,a,b);J(c,a);return d}function J(c,a,b,d){var g,f,e={},h=/^@(media|keyframes|supports)/;7!==n(a)&&(a=[a]);if(!d&&!b){var k=!1;for(f=0;f<t.length;f++)for(g=0;g<a.length;g++)if(t[f]in a[g]){k=!0;d=e[t[f]];var l=a[g][t[f]];l=7===n(l)?l:[l];e[t[f]]=d?d.concat(l):l}k&&J(c,e,b,k)}for(g=0;g<a.length;g++)for(m in d=a[g],d)if(!(m in e)){l=7===n(d[m])?d[m]:[d[m]];var m=D(m,c);for(f=0;f<l.length;f++)if("@"===m.charAt(0))if(-1<t.indexOf(m))w(c,m,l[f],null,b);else if(b&&(4===b.t||
7===b.t||12===b.t)||h.test(m)){var p=m;(k=b)&&!m.match(h)&&(m=O(b._s,m),k=b.p);k=w(c,m,null,null,k);k&&k.s===k._s||(k&&(X(k.e),Z(k.p?k.p:c[0],k.s,k)),k={cssText:m+" {}",placeholder:!0,type:I(m),cssRules:{}},k=E(c,k,k.p,m));J(c,l[f],k);b&&(b.o[p]||(b.o[p]=[]),b.o[p].push(k))}else u('import:Unsuported "'+m+'" ['+I(m)+"]",c);else-1<[5,4,3].indexOf(n(l[f]))?(k=b?b.c:c[0],k["*"]||w(c,"*",null,null,b),r(c,[k["*"].e[0]],m,l[f])):(k=w(c,m,null,null,b))&&r(c,[k],l[f])}}function r(c,a,b,d,g,f){if(3===n(g)){if(-1<
ha.indexOf(a[g].t))return u('set:Readonly rule "'+a[g].s+'" ['+a[g].t+"]",c);b=D(b,c);if(a[g].c)r(c,F(a[g].c,null,!0),b,d,!1,f);else{var e=n(d),h;if(8===e||7===e){var k="@"===b.charAt(0);var l=8===e?[d]:d,m=O(a[g].s,b);!f&&k&&(m=a[g].p?O(a[g].p.s,b):b);for(h=0;h<l.length;h++)f?r(c,a[g].o[b],l[h],!1,!1,f):(e=w(c,m,null,null,k?!1:a[g].p),!f&&e&&(k&&(d=e,(e=w(c,a[g].s,null,null,e))||(e=d)),r(c,[e],l[h],!1,!1,f),k&&a[g].p&&(d=a[g].p,7!==n(d.o[b])&&(d.o[b]=[]),d.o[b].push(e.p)),e.io=!0,7!==n(a[g].o[b])&&
(a[g].o[b]=[]),a[g].o[b].push(e)))}else if(9===e)try{l=d(b,H(c,[a[g]],b)),r(c,a,b,l,g,f),f||(a[g].up[b]=d)}catch(p){u("set:"+p,c)}else{k=A(d,b,c);if(b in c[5])for(d=0;d<c[5][b].length;d++)r(c,a,c[5][b][d],k,g,f);if(!x){if(b in K)for(d=0;d<K[b].length;d++){if(K[b][d]in a[g].e.style){h=K[b][d];break}}else h=W(b);h!==b&&(a[g].e.style[h]=k);a[g].e.style[b]=k}a[g].o[b]=k}}}else if(e=n(b),7===e)for(h=0;h<b.length;h++)if(a.length>h)r(c,[a[h]],b[h]);else break;else for(h=0;h<a.length;h++)if(8===e)for(k in b)r(c,
a,k,b[k],h,f);else if(9===e){g=b(a[h].s,H(c,[a[h]])[a[h].s]);for(k in g)r(c,a,k,g[k],h,f);f||(a[h].uo=b)}else r(c,a,b,d,h,f)}function H(c,a,b,d){if(!b)return z(c,a,3);var g=d?[]:"",f;for(f=0;f<a.length;f++){var e="";a[f].o[b]&&(e=a[f].o[b],7===n(e)&&(e=z(c,e,3)));x||(e&&""!==e||(e=a[f].e.style[b]),e&&""!==e||(e=(e=a[f].e.cssText.match(new RegExp(b+"s*:s*(.+?);")))?e[1].trim():""));e&&(d?g.push(e):g=e)}return g}function z(c,a,b,d,g){3!==n(b)&&(b=ia[b]||3);var f={},e,h,k,l,m=b,p={};if(1===b||2===b)b=
4;d||(d=[]);for(e=0;e<a.length;e++)if((g||3!==b||!a[e].io)&&0>d.indexOf(a[e])){if(-1<ja.indexOf(a[e].t))var q=a[e].o;else for(k in q=L({},a[e].o),a[e].o)if(7===n(a[e].o[k]))if(5===b||4===b)q[k]=null,delete q[k];else{q[k]=[];for(h=0;h<a[e].o[k].length;h++)0>d.indexOf(a[e].o[k][h])&&(l=z(c,[a[e].o[k][h]],m,d,!0)[a[e].o[k][h].s])&&0<aa(l).length&&q[k].push(l);0===q[k].length?delete q[k]:1===q[k].length&&(q[k]=q[k][0])}else 1!==m&&2!==m&&isFinite(a[e].o[k])&&(q[k]+="!");a[e].c&&(q=L(z(c,F(a[e].c,null,
!0),b,d),q));1>aa(q).length||(4===b?(f[a[e].n]={},f[a[e].n][a[e].s]=q):(f[a[e].s]?(7!==n(f[a[e].s])&&(f[a[e].s]=[f[a[e].s]]),f[a[e].s].push(q)):f[a[e].s]=q,p[a[e].s]=p[a[e].s]>a[e].n?p[a[e].s]:a[e].n),d.push(a[e]))}if(4===b)return f=ka(f),b===m?f:C(f,2===m,c[4].parse_tab);c={};a={};for(e in p)0>t.indexOf(e)&&(a[p[e]]=e);for(e=0;e<t.length;e++)f[t[e]]&&(c[t[e]]=f[t[e]]);for(e in a)c[a[e]]=f[a[e]];return c}function ba(c,a){var b,d;for(b=0;b<a.length;b++){if(!1!==a[b].uo){var g=a[b].uo(a[b].s,H(c,[a[b]])[a[b].s]);
for(d in g)r(c,a,d,g[d],b,!0)}if(a[b].c)ba(c,F(a[b].c,null,!0));else for(d in a[b].up)r(c,a,d,a[b].up[d](d,H(c,[a[b]],d)),b,!0)}}function P(c,a,b,d){var g=-1<[1,2].indexOf(n(b)),f,e=[];for(f=0;f<a.length;f++)a[f].c&&P(c,F(a[f].c,null,!0),b,d),g?(X(a[f].e),Z(a[f].p?a[f].p:c[0],a[f].s,a[f])):(e.push(a[f]),x||(a[f].e.style[b]=""),a[f].o[b]&&(7===n(a[f].o[b])&&P(c,a[f].o[b]),delete a[f].o[b]));d&&(d.e=Q(c,e))}function R(c,a,b,d,g){0>b&&(b+=a.length);return a[b]?y(c,[a[b]],d,!1,a[b].p||!1):y(c,[],d,!1,
g)}function Q(c,a){for(var b=[],d=0;d<a.length;d++)a[d].e&&b.push(x||a[d].e.placeholder?z(c,[a[d]],3):a[d].e);return b}function ca(c,a,b,d){var g=n(a);if(8===g)L(c,a);else if(5===g){if(2===n(b))return c[a];c[a]=b}else{if(7===g){b={};for(d=0;d<a.length;d++)b[a[d]]=c[a[d]];return b}if(2===g)return c}return d}function y(c,a,b,d,g){function f(){if(1>a.length&&!d&&5===n(b)){var f,k=[],l,m=g?g:[null];for(l=0;l<m.length;l++)(f=w(c,b,null,null,m[l]))&&k.push(f);a=k;e.e=Q(c,a);e.selector=1===a.length?a[0].s:
b}}var e=function(b){var d,e,g=[];f();for(d=0;d<a.length;d++)if(a[d].c){var h=G(a[d].c,b,!0);for(e=0;e<h.length;e++)g.push(h[e])}return y(c,g,b,null,a)};e.e=Q(c,a);e.selector=1===a.length?a[0].s:b;M(e,{set:function(b,d){f();r(c,a,b,d);return e},get:function(b,d){return H(c,a,b,d)},update:function(){ba(c,a);return e},"delete":function(b){P(c,a,b,e);return e},"export":function(b){return z(c,a,b)},parse:function(b){return z(c,a,b?2:1)},pos:function(d){return R(c,a,d,b,g)},first:function(){return R(c,
a,0,b,g)},last:function(){return R(c,a,-1,b,g)}});return e}function S(){var c=[{},!1,0,{},{},{}],a=function(b){try{return G(c,b,!1,a)}catch(d){u("CSSC:"+d,c)}};M(a,{version:"1.0.0",init:function(b){b=7===n(b)?b:[b];for(var d=0;d<b.length;d++){var g=!1;var f=n(b[d],1);if(b[d]){b[d]=b[d].sheet||b[d];f=b[d].href||f;try{g=b[d].cssRules||g}catch(h){f+='" -> "'+h}if(!g&&9===n(b[d])){if(b[d].e&&7===n(b[d].e)){g=b[d].e;var e="handler"}else"1.0.0"===b[d].version&&b[d].type===N?(g=b[d]().e,e="ID:"+b[d].conf().style_id):
e=b[d].name;f=(g?"CSSC":f)+"["+e+"]"}}g&&0<g.length?Y(c,g,null):u("init:Can't init from \""+f+'"',c)}return a},"import":function(b){J(c,b);return a},"export":function(a){return G(c).export(a)},parse:function(a){return G(c).parse(a)},update:function(b){G(c,b).update();return a},"new":function(){return S()},alias:function(b,d){var g=c[5],f=n(b),e;5===f&&(f={},f[b]=d,b=f,f=8);if(8===f)for(e in b)for(f=b[e],7!==n(f)&&(f=[f]),(e in g)||(g[e]=[]),d=0;d<f.length;d++)g[e].push(f[d]);return a},conf:function(b,
d){return ca(c[4],b,d,a)},vars:function(b,d){return ca(c[3],b,d,a)},parseVars:function(a,d){return D(a,[,,,d?L({},c[3],d):c[3],c[4]])},objFromCss:function(a){return V(a)},cssFromObj:function(a,c,g){return C(a,c,g)},_conf:da,type:N,type_export:la,messages:U});return a.conf(da)}var ha=[2,3,10,5],t=["@charset","@import","@namespace","@font-face"],B=t.slice(0,3),ja=[2,3,10],U=[],ea={Null:1,Undefined:2,Integer:3,Float:4,String:5,RegExp:6,Array:7,Object:8,Function:9},x=8===n(v),K={float:["cssFloat"]},L=
9===n(Object.assign)?Object.assign:function(){var c,a,b=arguments;for(a=1;a<b.length;a++)for(c in b[a])b[0][c]=b[a][c];return b[0]},fa=9===n(Object.defineProperty)?Object.defineProperty:function(c,a,b){c[a]=b.value},ma=9===n(Object.preventExtensions),T=9===n(Object.freeze)?Object.freeze:function(c){var a={};M(a,c);c=a;ma&&Object.preventExtensions(c);return c},aa=9===n(Object.keys)?Object.keys:function(c){var a=[],b;for(b in c)a.push(b);return a},ka=9===n(Object.values)?Object.values:function(c){var a=
[],b;for(b in c)a.push(c[b]);return a},N=T({rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,viewport:15}),ia={css:1,min:2,obj:3,object:3,arr:4,array:4,objNMD:5},la=T({css:"css",min:"min",obj:"obj",arr:"arr",object:"object",notMDObject:"objNMD",array:"array"}),da=T({style_id:"cssc-style",view_err:!0,parse_tab:2,parse_unit_default:"px",parse_vars_limit:100});if(x)v.exports=S();else return S()}("undefined"===typeof module?
document:module);

