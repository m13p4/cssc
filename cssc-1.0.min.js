/* CSSC.js | @version 1.0b |  m13p4 */
var CSSC=function(){function t(b,a){b='"'+a.style_id+'"/'+b.replace(/^.+?:/,function(a){return(a+"    ").slice(0,7)});a.view_err&&console.log(b);O.push(b)}function m(b,a){var c=Object.prototype.toString.call(b).split(/ |\]/)[1];"Number"===c&&(c=Math.floor(b)===b?"Integer":"Float");return a?c:Z[c]||c}function G(b,a){for(var c in a)aa(b,c,{enumerable:!0,value:a[c]})}function P(b,a,c){var d=m(b),f=5===d,e=f&&b.match(/^0x[0-9a-f\.\+]+$/i);if(isFinite(b)||e){c=(c||"px")+"";var g=b;e?(d=b.search(/\.|\+/),
0>d?g=parseInt(b):(f=b.substr(d+1),g=parseInt(b.substr(0,d))+("+"===b.charAt(d)?parseFloat(f):parseInt(f,16)/Math.pow(16,f.length))),d=m(g)):f&&(g=parseFloat(b),d=m(g));e||a.match(/(^|-)color$/i)?(b=g,f=0,4===d&&(b=Math.floor(g),f=g-b),b=[(b&16711680)>>16,(b&65280)>>8,b&255].join(", "),b=0<f?"rgba("+b+", "+Math.floor(100*f)/100+")":"rgb("+b+")"):b=3===d?g+c:Math.floor(100*g)/100+c}else if(f&&-1<b.indexOf(" ")){b=b.split(" ");for(d=0;d<b.length;d++)b[d]=P(b[d],a,c);b=b.join(" ")}else f&&"!"===b.charAt(b.length-
1)&&(b=b.substr(0,b.length-1));return b}function y(b,a,c,d,f){c=5===m(c)?c:Array((parseInt(c)||2)+1).join(" ");var e="",g,h=m(b);d=d||"";if(5===h)return b;if(7===h)for(h=0;h<b.length;h++)e+=y(b[h],a,c,d,!0);else for(g in b){var l=""+b[g];h=m(b[g]);if(7===h||8===h)if(f&&7===h){var k=y(b[g],a,c,d+c,f);""!==k&&(e=a?e+(g.replace(/\s*(,|:)\s*/g,"$1")+"{"+k+"}"):e+(d+g.replace(/\s*,\s*/g,",\n"+d)+" {\n"+k+d+"}\n"))}else for(8===h&&(l=[b[g]]),h=0;h<l.length;h++)-1<x.indexOf(g)?e+=g+" "+l[h]+";"+(a?"":"\n"):
(k=y(l[h],a,c,d+c,f),""!==k&&(e=a?e+(g.replace(/\s*(,|:)\s*/g,"$1")+"{"+k+"}"):e+(d+g.replace(/\s*,\s*/g,",\n"+d)+" {\n"+k+d+"}\n")));else e=-1<x.indexOf(g)?e+(g+" "+l+";"+(a?"":"\n")):a?e+(g+":"+l.trim().replace(/\s*,\s*/g,",")+";"):e+((d.length<c.length?c:d)+g+": "+l+";\n")}return e}function Q(b){if(/^@(namespace|import|charset)/.test(b))return b.replace(/(^@.*\s*|\s*;\s*$)/g,"");var a=b.replace(/(^.*?{\s*|\s*}\s*$)/g,"");b=a.split(";");var c={};if(""!==a)for(a=0;a<b.length;a++)if(""!==b[a]){var d=
b[a].split(":");c[d[0].trim()]=d.slice(1).join(":").trim()}return c}function H(b){b=b.trim();if("@"!==b.charAt(0))return 1;b=b.substr(1);var a=b.indexOf(" ");-1<a&&(b=b.substr(0,a));if(-1<b.indexOf("-")){a=b.split("-");var c;b=a[0];for(c=1;c<a.length;c++)b+=a[c].charAt(0).toUpperCase()+a[c].substr(1)}return I[b]||-1}function J(b,a){"@"===a.charAt(0)&&"@"===b.charAt(0)&&(a=a.substr(1));a="/"===a.charAt(0)?a.substr(1):","===a.charAt(0)?", "+a.substr(1).trim():" "+a;if(0<=b.indexOf(",")||0<a.indexOf(",")){b=
b.split(",");var c,d="",f=a.split(",");if(","!==a.charAt(0))for(c=0;c<b.length;c++)for(a=0;a<f.length;a++)d+=b[c]+f[a]+", ";else for(c=0;c<b.length;c++)d+=b[c]+a+", ";return d.replace(/,+\s*$/,"")}return b+a}function R(b){var a=b.parentRule?b.parentRule:b.parentStyleSheet,c;for(c=0;c<a.cssRules.length;c++)if(a.cssRules[c]===b){a.deleteRule(c);break}}function z(b,a,c){c||(c=100);a||(a={});b||(b="");for(var d=b.lastIndexOf("$"),f,e=0,g,h,l,k,n,p;0<=d&&e<c;){e++;g=null;k=b.substr(d+1);f=k.search(/[^\w\.]/);
f=0>f?b.length:f+d;n=b.substr(d+1,f-d);p=n.split(".");for(h=0;h<p.length;h++)if(!(1>p[h].length)){l=m(g);if(0===h&&p[h]in a)g=a[p[h]];else if((7===l||8===l)&&p[h]in g)g=g[p[h]];else if(5===l&&p[h].match(/^[0-9]+$/))g=g.charAt(p[h]);else{g="$"+n;break}if(9===m(g)){if("("===b.charAt(f+1)){f++;l=k=f;do l=b.indexOf("(",l+1),f=b.indexOf(")",f+1);while(-1<l&&l<f);0>f&&(f=b.length);k=b.substr(k+1,f-k-1);k=k.trim().split(/\s*,\s*/);g=g.apply(null,k)}else g=g();if("."===b.charAt(f+1))for(f++,l=f,k=b.substr(f+
1),f=k.search(/[^\w\.]/),k=k.substr(0,0>f?k.length:f),f=0>f?b.length:f+l,n=b.substr(d+1,f-d),k=k.split("."),l=0;l<k.length;l++)p.push(k[l])}}b=b.substr(0,d)+g+b.substr(f+1);f="$"+n===g?d:f+(g.length-1);if(0>--f)break;d=b.lastIndexOf("$",f)}return b}function S(b,a,c){for(var d=0;d<a.length;d++)a[d]&&a[d].parentStyleSheet&&a[d].parentStyleSheet.ownerNode&&a[d].parentStyleSheet.ownerNode.id!==b[4].style_id&&D(b,a[d],c)}function D(b,a,c,d){var f=a.cssText.substr(0,a.cssText.indexOf("{")).trim(),e=a.type,
g=c?c.c:b[0],h=0,l=4===e||7===e||12===e;if(1!==e&&5!==e&&4!==e&&7!==e&&8!==e&&6!==e&&12!==e&&10!==e&&3!==e&&2!==e)return t('index: Unsuported "'+f+'" ['+e+"]",b[4]);10===e&&(f=x[2]);3===e&&(f=x[1]);2===e&&(f=x[0]);c={_s:d||f,s:f,e:a,t:e,o:{},n:b[2]++,c:l?{}:!1,p:c||!1,uo:!1,up:{}};g[f]?h=g[f].e.push(c)-1:g[f]={t:e,e:[c]};l?S(b,a.cssRules,g[f].e[h]):g[f].e[h].o=Q(a.cssText);return c}function u(b,a,c,d,f){if(!f&&!b[1]){var e=b[4].style_id;var g=document;if(g.getElementById(e)){for(var h=0;10>h;h++)if(!g.getElementById(e+
"-"+h)){e=e+"-"+h;break}g.getElementById(e)&&t("crElem: can't create element.",b[4])}h=g.createElement("style");h.setAttribute("type","text/css");h.setAttribute("id",e);g.head.appendChild(h);b[1]=h;b[4].style_id=e}e=f?f.e:b[1].sheet;g=e.cssRules.length;h="";if(c){var l=m(c);if(8===l)for(var k in c)9===m(c[k])?(d=c[k](),h+=k+":"+d+"; "):h+=k+":"+c[k]+"; ";else if(9===l)for(k in d=c(),d)h+=k+":"+d[k]+"; ";else h=c+":"+d+";"}d=a+"{"+h+"}";l=!1;-1<x.indexOf(a)&&(d=a+" "+c);try{"insertRule"in e?e.insertRule(d,
g):"appendRule"in e?e.appendRule(d,g):"addRule"in e&&e.addRule(a,h,g),l=D(b,e.cssRules[g],f,a)}catch(n){t("crRule: "+(f?'"'+f.s+'" > ':"")+'"'+a+'" -> '+n,b[4])}return l||D(b,{_sel:a,cssText:d,parent:f||!1,type:H(a),placeholder:!0,cssRules:{},style:{}},f,k)}function T(b,a,c){if(b&&b[a]){var d=c?b[a].e.indexOf(c):-1;c?0<=d&&(b[a].e.splice(d,1),0>=b[a].e.length&&delete b[a]):delete b[a]}}function A(b,a,c){var d=m(a),f=7===m(b)?b[0]:b;if(5===d)return a=z(a,b[3],b[4].parse_vars_limit),c?f[a]?f[a].e:[]:
v(b,f[a]?f[a].e:[],a);if(6===d){d=[];for(var e in f)if(e.match(a))for(g=0;g<f[e].e.length;g++)d.push(f[e].e[g]);return c?d:v(b,d,a)}if(7===d){d=[];var g;for(g=0;g<a.length;g++){var h=z(a[g],b[3],b[4].parse_vars_limit);if(f[h])for(e=0;e<f[h].e.length;e++)d.push(f[h].e[e])}return c?d:v(b,d,a)}if(1===d||2===d){d=[];for(e in f)for(g=0;g<f[e].e.length;g++)d.push(f[e].e[g]);return c?d:v(b,d,a)}}function B(b,a,c,d){var f=m(a);if(-1<[5,6,7,1,2].indexOf(f))return A(b,a,c);E(b,a);return d}function E(b,a,c,
d){var f,e,g={};7!==m(a)&&(a=[a]);if(!d&&!c){var h=!1;for(e=0;e<r.length;e++)for(f=0;f<a.length;f++)if(r[e]in a[f]){h=!0;d=g[r[e]];var l=a[f][r[e]];l=7===m(l)?l:[l];d&&d.concat(l)}h&&E(b,g,c,h)}for(f=0;f<a.length;f++)for(k in d=a[f],d)if(!(k in g)){l=7===m(d[k])?d[k]:[d[k]];var k=z(k,b[3],b[4].parse_vars_limit);for(e=0;e<l.length;e++)if("@"===k.charAt(0))if(-1<r.indexOf(k))u(b,k,l[e],null,c);else if(k.match(/^@(media|keyframes|supports)/)||c&&(4===c.t||7===c.t||12===c.t)){var n=k;(h=c)&&!k.match(/^@(media|keyframes|supports)/)&&
(k=J(c._s,k),h=c.p);var p=u(b,k,null,null,h);p&&p.s===p._s||(p&&(R(p.e),T(p.p?p.p:b[0],p.s,p)),h={_sel:k,cssText:k+" {}",p:h||!1,placeholder:!0,type:H(k),cssRules:{}},p=D(b,h,h.p,k));E(b,l[e],p);c&&(c.o[n]||(c.o[n]=[]),c.o[n].push(p))}else t('import: Unsuported "'+k+'" ['+H(k)+"]",b[4]);else-1<[5,4,3].indexOf(m(l[e]))?(h=c?c.c:b[0],h["*"]||u(b,"*",null,null,c),q(b,[h["*"].e[0]],k,l[e])):(p=u(b,k,null,null,c))&&q(b,[p],l[e])}}function q(b,a,c,d,f){if(3===m(f)){if(-1<ba.indexOf(a[f].t))return t('set: Readonly rule "'+
a[f].s+'" ['+a[f].t+"]",b[4]);c=z(c,b[3],b[4].parse_vars_limit);if(a[f].c)q(b,A(a[f].c,null,!0),c,d);else{var e=m(d);if(8===e||7===e){var g="@"===c.charAt(0),h=8===e?[d]:d,l=J(a[f].s,c);g&&(l=a[f].p?J(a[f].p.s,c):c);for(e=0;e<h.length;e++)if(d=u(b,l,null,null,g?!1:a[f].p)){if(g){var k=d;(d=u(b,a[f].s,null,null,d))||(d=k)}q(b,[d],h[e]);g&&a[f].p&&(k=a[f].p,7!==m(k.o[c])&&(k.o[c]=[]),k.o[c].push(d.p));7!==m(a[f].o[c])&&(a[f].o[c]=[]);a[f].o[c].push(d)}}else if(9===e)try{h=d(c,C(b,[a[f]],c)),q(b,a,c,
h,f),a[f].up[c]=d}catch(n){t("set: "+n,b[4])}else b=P(d,c,b[4].parse_unit_default),a[f].e.style[c]=b,a[f].o[c]=b}}else if(h=m(c),7===h)for(e=0;e<c.length;e++)if(a.length>e)q(b,[a[e]],c[e]);else break;else for(e=0;e<a.length;e++)if(8===h)for(g in c)q(b,a,g,c[g],e);else if(9===h){f=c(a[e].s,C(b,[a[e]])[a[e].s]);for(g in f)q(b,a,g,f[g],e);a[e].uo=c}else q(b,a,c,d,e)}function C(b,a,c,d){if(!c)return w(b,a,3);var f=d?[]:"",e;for(e=0;e<a.length;e++){var g="";a[e].o[c]&&(g=a[e].o[c],7===m(g)&&(g=w(b,g,3)));
g&&""!==g||(g=a[e].e.style[c]);g&&""!==g||(g=(g=a[e].e.cssText.match(new RegExp(c+"s*:s*(.+?);")))?g[1].trim():"");g&&d?f.push(g):f=g}return f}function w(b,a,c,d){3!==m(c)&&(c=ca[c]||3);var f={},e,g,h,l,k=c;if(1===c||2===c)c=4;d||(d=[]);for(e=0;e<a.length;e++)if(0>d.indexOf(a[e])){if(-1<da.indexOf(a[e].t))var n=a[e].o;else for(h in n=F({},a[e].o),a[e].o)if(7===m(a[e].o[h]))if(5===c||4===c)n[h]=null,delete n[h];else{n[h]=[];for(g=0;g<a[e].o[h].length;g++)0>d.indexOf(a[e].o[h][g])&&(d.push(a[e].o[h][g]),
(l=w(b,[a[e].o[h][g]],c,d)[a[e].o[h][g].s])&&0<U(l).length&&(n[h][g]=l));0===n[h].length?delete n[h]:1===n[h].length&&(n[h]=n[h][0])}else 1!==k&&2!==k&&isFinite(a[e].o[h])&&(n[h]+="!");a[e].c&&(n=F(w(b,A(a[e].c,null,!0),c,d),n));1>U(n).length||(4===c?(f[a[e].n]={},f[a[e].n][a[e].s]=n):f[a[e].s]?(7!==m(f[a[e].s])&&(f[a[e].s]=[f[a[e].s]]),f[a[e].s].push(n)):f[a[e].s]=n,d.push(a[e]))}if(4===c)return f=ea(f),c===k?f:y(f,2===k,b[4].parse_tab);b={};l=!1;for(e=0;e<r.length;e++)f[r[e]]&&(b[r[e]]=f[r[e]],
l=!0);if(l)for(e in f)b[e]||(b[e]=f[e]);return l?b:f}function V(b,a){var c,d;for(c=0;c<a.length;c++){if(!1!==a[c].uo){var f=a[c].uo(a[c].s,C(b,[a[c]])[a[c].s]);for(d in f)q(b,a,d,f[d],c)}if(a[c].c)V(b,A(a[c].c,null,!0));else for(d in a[c].up)q(b,a,d,a[c].up[d](d,C(b,[a[c]],d)),c)}}function K(b,a,c,d){var f=-1<[1,2].indexOf(m(c)),e,g=[];for(e=0;e<a.length;e++)a[e].c&&K(b,A(a[e].c,null,!0),c,d),f?(R(a[e].e),T(a[e].p?a[e].p:b[0],a[e].s,a[e])):(g.push(a[e]),a[e].e.style[c]="",a[e].o[c]&&(7===m(a[e].o[c])&&
K(b,a[e].o[c]),delete a[e].o[c]));d&&(d.e=L(b,g))}function M(b,a,c,d,f){0>c&&(c+=a.length);return a[c]?v(b,[a[c]],d,!1,a[c].p||!1):v(b,[],d,!1,f)}function L(b,a){for(var c=[],d=0;d<a.length;d++)a[d].e&&c.push(a[d].e.placeholder?w(b,[a[d]],3):a[d].e);return c}function W(b,a,c,d){var f=m(a);if(8===f)F(b,a);else if(5===f){if(2===m(c))return b[a];b[a]=c}else{if(7===f){c={};for(d=0;d<a.length;d++)c[a[d]]=b[a[d]];return c}if(2===f)return b}return d}function v(b,a,c,d,f){function e(){if(1>a.length&&!d&&
5===m(c)){var e,l=[],k,n=f?f:[null];for(k=0;k<n.length;k++)(e=u(b,c,null,null,n[k]))&&l.push(e);a=l;g.e=L(b,a);g.selector=1===a.length?a[0].s:c}}var g=function(c){var d,f,g=[];e();for(d=0;d<a.length;d++)if(a[d].c){var h=B(a[d].c,c,!0);for(f=0;f<h.length;f++)g.push(h[f])}return v(b,g,c,null,a)};g.e=L(b,a);g.selector=1===a.length?a[0].s:c;G(g,{set:function(c,d){e();q(b,a,c,d);return g},get:function(c,d){return C(b,a,c,d)},update:function(){V(b,a);return g},"delete":function(c){K(b,a,c,g);return g},
"export":function(c){return w(b,a,c)},parse:function(c){return w(b,a,c?2:1)},pos:function(d){return M(b,a,d,c,f)},first:function(){return M(b,a,0,c,f)},last:function(){return M(b,a,-1,c,f)}});return g}function X(){var b=[{},!1,0,{},{}],a=function(c){try{return B(b,c,!1,a)}catch(d){t("CSSC: "+d,b[4])}};G(a,{version:"1.0b",init:function(c){c=7===m(c)?c:[c];for(var d=0;d<c.length;d++){var f=!1;var e=m(c[d],1);if(c[d]){c[d]=c[d].sheet||c[d];e=c[d].href||e;try{f=c[d].cssRules||f}catch(h){e+='" -> "'+h}if(!f&&
9===m(c[d])){if(c[d].e&&7===m(c[d].e)){f=c[d].e;var g="handler"}else"1.0b"===c[d].version&&c[d].t===I?(f=c[d]().e,g="ID:"+c[d].conf().style_id):g=c[d].name;e=(f?"CSSC":e)+"["+g+"]"}}f&&0<f.length?S(b,f,null):t("init: Can't init from \""+e+'"',b[4])}return a},"import":function(c){E(b,c);return a},"export":function(a){return B(b).export(a)},parse:function(a){return B(b).parse(a)},update:function(c){B(b,c).update();return a},"new":function(){return X()},conf:function(c,d){return W(b[4],c,d,a,!1)},vars:function(c,
d){return W(b[3],c,d,a,!1)},parseVars:function(a,d){return z(a,d?F({},b[3],d):b[3],b[4].parse_vars_limit)},objFromCss:function(a){return Q(a)},cssFromObj:function(a,b,f){return y(a,b,f)},_conf:Y,type:I,type_export:fa,messages:O});a.conf(Y);return a}var ba=[2,3,10,5],r=["@charset","@import","@namespace","@font-face"],x=r.slice(0,3),da=[2,3,10],O=[],Z={Null:1,Undefined:2,Integer:3,Float:4,String:5,RegExp:6,Array:7,Object:8,Function:9},F=9===m(Object.assign)?Object.assign:function(){var b,a,c=arguments;
for(a=1;a<c.length;a++)for(b in c[a])c[0][b]=c[a][b];return c[0]},aa=9===m(Object.defineProperty)?Object.defineProperty:function(b,a,c){b[a]=c.value},ha=9===m(Object.preventExtensions),N=9===m(Object.freeze)?Object.freeze:function(b){var a={};G(a,b);b=a;ha&&Object.preventExtensions(b);return b},U=9===m(Object.keys)?Object.keys:function(b){var a=[],c;for(c in b)a.push(c);return a},ea=9===m(Object.values)?Object.values:function(b){var a=[],c;for(c in b)a.push(b[c]);return a},I=N({rule:1,charset:2,"import":3,
media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,viewport:15}),ca={css:1,min:2,obj:3,object:3,arr:4,array:4,objNMD:5},fa=N({css:"css",min:"min",obj:"obj",arr:"arr",object:"object",notMDObject:"objNMD",array:"array"}),Y=N({style_id:"cssc-style",view_err:!0,parse_tab:2,parse_unit_default:"px",parse_vars_limit:100});return X()}();
