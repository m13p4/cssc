/* CSSC.js | @version 1.0b |  m13p4 */
var CSSC=function(){function t(b,a){b='"'+a.style_id+'"/'+b.replace(/^.+?:/,function(a){return(a+"    ").slice(0,7)});a.view_err&&console.log(b);P.push(b)}function m(b,a){var c=Object.prototype.toString.call(b).split(/ |\]/)[1];"Number"===c&&(c=Math.floor(b)===b?"Integer":"Float");return a?c:ba[c]||c}function H(b,a){for(var c in a)ca(b,c,{enumerable:!0,value:a[c]})}function Q(b,a,c){var d=m(b),e=5===d,f=e&&b.match(/^0x[0-9a-f\.\+]+$/i);if(isFinite(b)||f){c=(c||"px")+"";var g=b;f?(d=b.search(/\.|\+/),
0>d?g=parseInt(b):(e=b.substr(d+1),g=parseInt(b.substr(0,d))+("+"===b.charAt(d)?parseFloat(e):parseInt(e,16)/Math.pow(16,e.length))),d=m(g)):e&&(g=parseFloat(b),d=m(g));f||a.match(/(^|-)color$/i)?(b=g,e=0,4===d&&(b=Math.floor(g),e=g-b),b=[(b&16711680)>>16,(b&65280)>>8,b&255].join(", "),b=0<e?"rgba("+b+", "+Math.floor(100*e)/100+")":"rgb("+b+")"):b=3===d?g+c:Math.floor(100*g)/100+c}else if(e&&-1<b.indexOf(" ")){b=b.split(" ");for(d=0;d<b.length;d++)b[d]=Q(b[d],a,c);b=b.join(" ")}else e&&"!"===b.charAt(b.length-
1)&&(b=b.substr(0,b.length-1));return b}function y(b,a,c,d,e){c=5===m(c)?c:Array((parseInt(c)||2)+1).join(" ");var f="",g,h=m(b);d=d||"";if(5===h)return b;if(7===h)for(h=0;h<b.length;h++)f+=y(b[h],a,c,d,!0);else for(g in b){var l=""+b[g];h=m(b[g]);if(7===h||8===h)if(e&&7===h){var k=y(b[g],a,c,d+c,e);""!==k&&(f=a?f+(g.replace(/\s*(,|:)\s*/g,"$1")+"{"+k+"}"):f+(d+g.replace(/\s*,\s*/g,",\n"+d)+" {\n"+k+d+"}\n"))}else for(8===h&&(l=[b[g]]),h=0;h<l.length;h++)-1<x.indexOf(g)?f+=g+" "+l[h]+";"+(a?"":"\n"):
(k=y(l[h],a,c,d+c,e),""!==k&&(f=a?f+(g.replace(/\s*(,|:)\s*/g,"$1")+"{"+k+"}"):f+(d+g.replace(/\s*,\s*/g,",\n"+d)+" {\n"+k+d+"}\n")));else f=-1<x.indexOf(g)?f+(g+" "+l+";"+(a?"":"\n")):a?f+(g+":"+l.trim().replace(/\s*,\s*/g,",")+";"):f+((d.length<c.length?c:d)+g+": "+l+";\n")}return f}function R(b){if(/^@(namespace|import|charset)/.test(b))return b.replace(/(^@.*\s*|\s*;\s*$)/g,"");var a=b.replace(/(^.*?{\s*|\s*}\s*$)/g,"");b=a.split(";");var c={};if(""!==a)for(a=0;a<b.length;a++)if(""!==b[a]){var d=
b[a].split(":");c[d[0].trim()]=d.slice(1).join(":").trim()}return c}function S(b){var a=b.split("-"),c;b=a[0];for(c=1;c<a.length;c++)b+=a[c].charAt(0).toUpperCase()+a[c].substr(1);return b}function I(b){b=b.trim();if("@"!==b.charAt(0))return 1;b=b.substr(1);var a=b.indexOf(" ");-1<a&&(b=b.substr(0,a));return J[S(b)]||-1}function K(b,a){"@"===a.charAt(0)&&"@"===b.charAt(0)&&(a=a.substr(1));a="/"===a.charAt(0)?a.substr(1):","===a.charAt(0)?", "+a.substr(1).trim():" "+a;if(0<=b.indexOf(",")||0<a.indexOf(",")){b=
b.split(",");var c,d="",e=a.split(",");if(","!==a.charAt(0))for(c=0;c<b.length;c++)for(a=0;a<e.length;a++)d+=b[c]+e[a]+", ";else for(c=0;c<b.length;c++)d+=b[c]+a+", ";return d.replace(/,+\s*$/,"")}return b+a}function T(b){var a=b.parentRule?b.parentRule:b.parentStyleSheet,c;for(c=0;c<a.cssRules.length;c++)if(a.cssRules[c]===b){a.deleteRule(c);break}}function z(b,a,c){c||(c=100);a||(a={});b||(b="");for(var d=b.lastIndexOf("$"),e,f=0,g,h,l,k,n,q;0<=d&&f<c;){f++;g=null;k=b.substr(d+1);e=k.search(/[^\w\.]/);
e=0>e?b.length:e+d;n=b.substr(d+1,e-d);q=n.split(".");for(h=0;h<q.length;h++)if(!(1>q[h].length)){l=m(g);if(0===h&&q[h]in a)g=a[q[h]];else if((7===l||8===l)&&q[h]in g)g=g[q[h]];else if(5===l&&q[h].match(/^[0-9]+$/))g=g.charAt(q[h]);else{g="$"+n;break}if(9===m(g)){if("("===b.charAt(e+1)){e++;l=k=e;do l=b.indexOf("(",l+1),e=b.indexOf(")",e+1);while(-1<l&&l<e);0>e&&(e=b.length);k=b.substr(k+1,e-k-1);k=k.trim().split(/\s*,\s*/);g=g.apply(null,k)}else g=g();if("."===b.charAt(e+1))for(e++,l=e,k=b.substr(e+
1),e=k.search(/[^\w\.]/),k=k.substr(0,0>e?k.length:e),e=0>e?b.length:e+l,n=b.substr(d+1,e-d),k=k.split("."),l=0;l<k.length;l++)q.push(k[l])}}b=b.substr(0,d)+g+b.substr(e+1);e="$"+n===g?d:e+(g.length-1);if(0>--e)break;d=b.lastIndexOf("$",e)}return b}function U(b,a,c){for(var d=0;d<a.length;d++)a[d]&&a[d].parentStyleSheet&&a[d].parentStyleSheet.ownerNode&&a[d].parentStyleSheet.ownerNode.id!==b[4].style_id&&D(b,a[d],c)}function D(b,a,c,d){var e=a.cssText.substr(0,a.cssText.indexOf("{")).trim(),f=a.type,
g=c?c.c:b[0],h=0,l=4===f||7===f||12===f;if(1!==f&&5!==f&&4!==f&&7!==f&&8!==f&&6!==f&&12!==f&&10!==f&&3!==f&&2!==f)return t('index: Unsuported "'+e+'" ['+f+"]",b[4]);10===f&&(e=x[2]);3===f&&(e=x[1]);2===f&&(e=x[0]);c={_s:d||e,s:e,e:a,t:f,o:{},n:b[2]++,c:l?{}:!1,p:c||!1,uo:!1,up:{}};g[e]?h=g[e].e.push(c)-1:g[e]={t:f,e:[c]};l?U(b,a.cssRules,g[e].e[h]):g[e].e[h].o=R(a.cssText);return c}function u(b,a,c,d,e){if(!e&&!b[1]){var f=b[4].style_id;var g=document;if(g.getElementById(f)){for(var h=0;10>h;h++)if(!g.getElementById(f+
"-"+h)){f=f+"-"+h;break}g.getElementById(f)&&t("crElem: can't create element.",b[4])}h=g.createElement("style");h.setAttribute("type","text/css");h.setAttribute("id",f);g.head.appendChild(h);b[1]=h;b[4].style_id=f}f=e?e.e:b[1].sheet;g=f.cssRules.length;h="";if(c){var l=m(c);if(8===l)for(var k in c)9===m(c[k])?(d=c[k](),h+=k+":"+d+"; "):h+=k+":"+c[k]+"; ";else if(9===l)for(k in d=c(),d)h+=k+":"+d[k]+"; ";else h=c+":"+d+";"}d=a+" { "+h+" }";l=!1;-1<x.indexOf(a)&&(d=a+" "+c);try{"insertRule"in f?f.insertRule(d,
g):"appendRule"in f?f.appendRule(d,g):"addRule"in f&&f.addRule(a,h,g),l=D(b,f.cssRules[g],e,a)}catch(n){t("create: "+(e?'"'+e.s+'" > ':"")+'"'+a+'" -> '+n,b[4])}return l||D(b,{cssText:d,type:I(a),placeholder:!0,cssRules:{},style:{}},e,k)}function V(b,a,c){if(b&&b[a]){var d=c?b[a].e.indexOf(c):-1;c?0<=d&&(b[a].e.splice(d,1),0>=b[a].e.length&&delete b[a]):delete b[a]}}function A(b,a,c){var d=m(a),e=7===m(b)?b[0]:b;if(5===d)return a=z(a,b[3],b[4].parse_vars_limit),c?e[a]?e[a].e:[]:v(b,e[a]?e[a].e:[],
a);if(6===d){d=[];for(var f in e)if(f.match(a))for(g=0;g<e[f].e.length;g++)d.push(e[f].e[g]);return c?d:v(b,d,a)}if(7===d){d=[];var g;for(g=0;g<a.length;g++){var h=z(a[g],b[3],b[4].parse_vars_limit);if(e[h])for(f=0;f<e[h].e.length;f++)d.push(e[h].e[f])}return c?d:v(b,d,a)}if(1===d||2===d){d=[];for(f in e)for(g=0;g<e[f].e.length;g++)d.push(e[f].e[g]);return c?d:v(b,d,a)}}function B(b,a,c,d){var e=m(a);if(-1<[5,6,7,1,2].indexOf(e))return A(b,a,c);E(b,a);return d}function E(b,a,c,d){var e,f,g={};7!==
m(a)&&(a=[a]);if(!d&&!c){var h=!1;for(f=0;f<r.length;f++)for(e=0;e<a.length;e++)if(r[f]in a[e]){h=!0;d=g[r[f]];var l=a[e][r[f]];l=7===m(l)?l:[l];d&&d.concat(l)}h&&E(b,g,c,h)}for(e=0;e<a.length;e++)for(k in d=a[e],d)if(!(k in g)){l=7===m(d[k])?d[k]:[d[k]];var k=z(k,b[3],b[4].parse_vars_limit);for(f=0;f<l.length;f++)if("@"===k.charAt(0))if(-1<r.indexOf(k))u(b,k,l[f],null,c);else if(c&&(4===c.t||7===c.t||12===c.t)||/^@(media|keyframes|supports)/.test(k)){var n=k;(h=c)&&!k.match(/^@(media|keyframes|supports)/)&&
(k=K(c._s,k),h=c.p);h=u(b,k,null,null,h);h&&h.s===h._s||(h&&(T(h.e),V(h.p?h.p:b[0],h.s,h)),h={cssText:k+" {}",placeholder:!0,type:I(k),cssRules:{}},h=D(b,h,h.p,k));E(b,l[f],h);c&&(c.o[n]||(c.o[n]=[]),c.o[n].push(h))}else t('import: Unsuported "'+k+'" ['+I(k)+"]",b[4]);else-1<[5,4,3].indexOf(m(l[f]))?(h=c?c.c:b[0],h["*"]||u(b,"*",null,null,c),p(b,[h["*"].e[0]],k,l[f])):(h=u(b,k,null,null,c))&&p(b,[h],l[f])}}function p(b,a,c,d,e){if(3===m(e)){if(-1<da.indexOf(a[e].t))return t('set: Readonly rule "'+
a[e].s+'" ['+a[e].t+"]",b[4]);c=z(c,b[3],b[4].parse_vars_limit);if(a[e].c)p(b,A(a[e].c,null,!0),c,d);else{var f=m(d),g;if(8===f||7===f){var h="@"===c.charAt(0),l=8===f?[d]:d,k=K(a[e].s,c);h&&(k=a[e].p?K(a[e].p.s,c):c);for(g=0;g<l.length;g++)if(f=u(b,k,null,null,h?!1:a[e].p))h&&(d=f,(f=u(b,a[e].s,null,null,f))||(f=d)),p(b,[f],l[g]),h&&a[e].p&&(d=a[e].p,7!==m(d.o[c])&&(d.o[c]=[]),d.o[c].push(f.p)),7!==m(a[e].o[c])&&(a[e].o[c]=[]),a[e].o[c].push(f)}else if(9===f)try{l=d(c,C(b,[a[e]],c)),p(b,a,c,l,e),
a[e].up[c]=d}catch(n){t("set: "+n,b[4])}else{b=Q(d,c,b[4].parse_unit_default);if(c in F)for(d=0;d<F[c].length;d++){if(F[c][d]in a[e].e.style){g=F[c][d];break}}else g=S(c);g!==c&&(a[e].e.style[g]=b);a[e].e.style[c]=b;a[e].o[c]=b}}}else if(f=m(c),7===f)for(g=0;g<c.length;g++)if(a.length>g)p(b,[a[g]],c[g]);else break;else for(g=0;g<a.length;g++)if(8===f)for(h in c)p(b,a,h,c[h],g);else if(9===f){e=c(a[g].s,C(b,[a[g]])[a[g].s]);for(h in e)p(b,a,h,e[h],g);a[g].uo=c}else p(b,a,c,d,g)}function C(b,a,c,d){if(!c)return w(b,
a,3);var e=d?[]:"",f;for(f=0;f<a.length;f++){var g="";a[f].o[c]&&(g=a[f].o[c],7===m(g)&&(g=w(b,g,3)));g&&""!==g||(g=a[f].e.style[c]);g&&""!==g||(g=(g=a[f].e.cssText.match(new RegExp(c+"s*:s*(.+?);")))?g[1].trim():"");g&&d?e.push(g):e=g}return e}function w(b,a,c,d){3!==m(c)&&(c=ea[c]||3);var e={},f,g,h,l,k=c;if(1===c||2===c)c=4;d||(d=[]);for(f=0;f<a.length;f++)if(0>d.indexOf(a[f])){if(-1<fa.indexOf(a[f].t))var n=a[f].o;else for(h in n=G({},a[f].o),a[f].o)if(7===m(a[f].o[h]))if(5===c||4===c)n[h]=null,
delete n[h];else{n[h]=[];for(g=0;g<a[f].o[h].length;g++)0>d.indexOf(a[f].o[h][g])&&(d.push(a[f].o[h][g]),(l=w(b,[a[f].o[h][g]],c,d)[a[f].o[h][g].s])&&0<W(l).length&&(n[h][g]=l));0===n[h].length?delete n[h]:1===n[h].length&&(n[h]=n[h][0])}else 1!==k&&2!==k&&isFinite(a[f].o[h])&&(n[h]+="!");a[f].c&&(n=G(w(b,A(a[f].c,null,!0),c,d),n));1>W(n).length||(4===c?(e[a[f].n]={},e[a[f].n][a[f].s]=n):e[a[f].s]?(7!==m(e[a[f].s])&&(e[a[f].s]=[e[a[f].s]]),e[a[f].s].push(n)):e[a[f].s]=n,d.push(a[f]))}if(4===c)return e=
ha(e),c===k?e:y(e,2===k,b[4].parse_tab);b={};l=!1;for(f=0;f<r.length;f++)e[r[f]]&&(b[r[f]]=e[r[f]],l=!0);if(l)for(f in e)b[f]||(b[f]=e[f]);return l?b:e}function X(b,a){var c,d;for(c=0;c<a.length;c++){if(!1!==a[c].uo){var e=a[c].uo(a[c].s,C(b,[a[c]])[a[c].s]);for(d in e)p(b,a,d,e[d],c)}if(a[c].c)X(b,A(a[c].c,null,!0));else for(d in a[c].up)p(b,a,d,a[c].up[d](d,C(b,[a[c]],d)),c)}}function L(b,a,c,d){var e=-1<[1,2].indexOf(m(c)),f,g=[];for(f=0;f<a.length;f++)a[f].c&&L(b,A(a[f].c,null,!0),c,d),e?(T(a[f].e),
V(a[f].p?a[f].p:b[0],a[f].s,a[f])):(g.push(a[f]),a[f].e.style[c]="",a[f].o[c]&&(7===m(a[f].o[c])&&L(b,a[f].o[c]),delete a[f].o[c]));d&&(d.e=M(b,g))}function N(b,a,c,d,e){0>c&&(c+=a.length);return a[c]?v(b,[a[c]],d,!1,a[c].p||!1):v(b,[],d,!1,e)}function M(b,a){for(var c=[],d=0;d<a.length;d++)a[d].e&&c.push(a[d].e.placeholder?w(b,[a[d]],3):a[d].e);return c}function Y(b,a,c,d){var e=m(a);if(8===e)G(b,a);else if(5===e){if(2===m(c))return b[a];b[a]=c}else{if(7===e){c={};for(d=0;d<a.length;d++)c[a[d]]=
b[a[d]];return c}if(2===e)return b}return d}function v(b,a,c,d,e){function f(){if(1>a.length&&!d&&5===m(c)){var f,l=[],k,n=e?e:[null];for(k=0;k<n.length;k++)(f=u(b,c,null,null,n[k]))&&l.push(f);a=l;g.e=M(b,a);g.selector=1===a.length?a[0].s:c}}var g=function(c){var d,e,g=[];f();for(d=0;d<a.length;d++)if(a[d].c){var h=B(a[d].c,c,!0);for(e=0;e<h.length;e++)g.push(h[e])}return v(b,g,c,null,a)};g.e=M(b,a);g.selector=1===a.length?a[0].s:c;H(g,{set:function(c,d){f();p(b,a,c,d);return g},get:function(c,d){return C(b,
a,c,d)},update:function(){X(b,a);return g},"delete":function(c){L(b,a,c,g);return g},"export":function(c){return w(b,a,c)},parse:function(c){return w(b,a,c?2:1)},pos:function(d){return N(b,a,d,c,e)},first:function(){return N(b,a,0,c,e)},last:function(){return N(b,a,-1,c,e)}});return g}function Z(){var b=[{},!1,0,{},{}],a=function(c){try{return B(b,c,!1,a)}catch(d){t("CSSC: "+d,b[4])}};H(a,{version:"1.0b",init:function(c){c=7===m(c)?c:[c];for(var d=0;d<c.length;d++){var e=!1;var f=m(c[d],1);if(c[d]){c[d]=
c[d].sheet||c[d];f=c[d].href||f;try{e=c[d].cssRules||e}catch(h){f+='" -> "'+h}if(!e&&9===m(c[d])){if(c[d].e&&7===m(c[d].e)){e=c[d].e;var g="handler"}else"1.0b"===c[d].version&&c[d].type===J?(e=c[d]().e,g="ID:"+c[d].conf().style_id):g=c[d].name;f=(e?"CSSC":f)+"["+g+"]"}}e&&0<e.length?U(b,e,null):t("init: Can't init from \""+f+'"',b[4])}return a},"import":function(c){E(b,c);return a},"export":function(a){return B(b).export(a)},parse:function(a){return B(b).parse(a)},update:function(c){B(b,c).update();
return a},"new":function(){return Z()},conf:function(c,d){return Y(b[4],c,d,a,!1)},vars:function(c,d){return Y(b[3],c,d,a,!1)},parseVars:function(a,d){return z(a,d?G({},b[3],d):b[3],b[4].parse_vars_limit)},objFromCss:function(a){return R(a)},cssFromObj:function(a,b,e){return y(a,b,e)},_conf:aa,type:J,type_export:ia,messages:P});a.conf(aa);return a}var da=[2,3,10,5],r=["@charset","@import","@namespace","@font-face"],x=r.slice(0,3),fa=[2,3,10],P=[],ba={Null:1,Undefined:2,Integer:3,Float:4,String:5,
RegExp:6,Array:7,Object:8,Function:9},F={float:["cssFloat"]},G=9===m(Object.assign)?Object.assign:function(){var b,a,c=arguments;for(a=1;a<c.length;a++)for(b in c[a])c[0][b]=c[a][b];return c[0]},ca=9===m(Object.defineProperty)?Object.defineProperty:function(b,a,c){b[a]=c.value},ja=9===m(Object.preventExtensions),O=9===m(Object.freeze)?Object.freeze:function(b){var a={};H(a,b);b=a;ja&&Object.preventExtensions(b);return b},W=9===m(Object.keys)?Object.keys:function(b){var a=[],c;for(c in b)a.push(c);
return a},ha=9===m(Object.values)?Object.values:function(b){var a=[],c;for(c in b)a.push(b[c]);return a},J=O({rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,viewport:15}),ea={css:1,min:2,obj:3,object:3,arr:4,array:4,objNMD:5},ia=O({css:"css",min:"min",obj:"obj",arr:"arr",object:"object",notMDObject:"objNMD",array:"array"}),aa=O({style_id:"cssc-style",view_err:!0,parse_tab:2,parse_unit_default:"px",parse_vars_limit:100});
return Z()}();
