/*
@version 1.0b
@author m13p4
@copyright Meliantchenkov Pavel
*/
var _debug=!0,csscDebug={},CSSC=function(){var t,r=function(p,r){var m={},u=!1,h=null;_debug&&(csscDebug.index=m);var w=function(){if(!u){if("cssRules"in p)v(p.cssRules);else if("length"in p)for(var a=0;a<p.length;a++)"true"!==p[a].ownerNode.getAttribute("data-cssc-ignore")&&v(p[a].cssRules);u=!0}},v=function(a,b){for(var f=0;f<a.length;f++)l.isElemInOwnNode(a[f])||y(a[f],b)},y=function(a,b){var f=a.cssText.substr(0,a.cssText.indexOf("{")).trim(),e=a.type,c=b?b:m;if(e!==h.ruleType.rule&&e!==h.ruleType.fontFace&&
e!==h.ruleType.media&&e!==h.ruleType.keyframes&&e!==h.ruleType.keyframe)console.log("unsuported type: ["+e+"] - "+h.ruleType.names[e]);else{a._update=!1;e===h.ruleType.rule&&(a.style._update={});b={indexElem:a,children:!1,parent:b?b:!1,events:{},type:e};c[f]?(c[f].content[0].indexElem===a&&(console.log('Dublicate "'+f+'": '),console.log(Error().stack+"\n\n")),b=c[f].content.push(b)-1):(c[f]={type:e,content:[b],events:{}},b=0);if(e===h.ruleType.media||e===h.ruleType.keyframes)c[f].content[b].children=
{},v(a.cssRules,c[f].content[b].children,!1);return c[f]}},q=function(a,b,f,e,c){e||t||l.createNewStyleElem();e=e?e:t.sheet;var g=e.cssRules.length,k="";if(b)if("[object Object]"===Object.prototype.toString.call(b))for(var d in b)"[object Function]"===Object.prototype.toString.call(b[d])?(f=b[d](),k+=d+":"+f+"; "):k+=d+":"+b[d]+"; ";else if("[object Function]"===Object.prototype.toString.call(b))for(d in f=b(),f)k+=d+":"+f[d]+"; ";else k=b+":"+f+";";"insertRule"in e?e.insertRule(a+"{"+k+"}",g):"appendRule"in
e?e.appendRule(a+"{"+k+"}",g):"addRule"in e&&e.addRule(a,k,g);return y(e.cssRules[g],c)},z=function(a,b){u||w();b=b?b:m;return b[a]?b[a]:null},l={createNewStyleElem:function(){if(document.getElementById(h.conf.styleId)){for(var a=0;10>a;a++)if(!document.getElementById(h.conf.styleId+"-"+a)){h.conf.styleId=h.conf.styleId+"-"+a;break}if(document.getElementById(h.conf.styleId))throw Error("cann not create new element..");}a=document.createElement("style");a.setAttribute("type","text/css");a.setAttribute("id",
h.conf.styleId);a.appendChild(document.createTextNode(""));document.head.appendChild(a);t=a},isElemInOwnNode:function(a){return a&&!!a.parentStyleSheet&&!!a.parentStyleSheet.ownerNode&&a.parentStyleSheet.ownerNode.id===h.conf.styleId},parseValue:function(a){if(isFinite(a))return 0===a%1?a+"px":Math.floor(100*a)/100+"px";var b=a.split(" ");if(0<b.length){for(var f=0;f<b.length;f++)isFinite(b[f])&&(a=b[f],b[f]=0===a%1?a+"px":Math.floor(100*a)/100+"px");return b.join(" ")}return a},findPropInCssText:function(a,
b){return(a=a.match(new RegExp(b+"s*:s*(.+?);")))?a[1].trim():""},exportParser:function(a,b){return b===h.export.type.ruleRow?a.replace(/\n/g,"")+"\n":b===h.export.type.min?a.replace(/(;|:|\s*?{|}|,)\s+/g,function(a){return a.trim()}):a.match(/^@(media|keyframes)/)?a.replace(/^(.*){([\s\S]*)}$/,function(a,b,c){return b+"{\n    "+c.trim().replace(/({|}|;)\s*/g,function(a){a=a.trim();if("{"===a)return"{\n        ";if("}"===a)return"}\n    ";if(";"===a)return";\n        "}).replace(/\s+}/g,"\n    }").trim()+
"\n}\n"}):a.replace(/({|}|;)\s*/g,function(a){a=a.trim();if("{"===a)return a+"\n    ";if("}"===a)return a+"\n";if(";"===a)return a+"\n    "}).replace(/\s+}/,"\n}")},getHandler:function(a,b,f){b=b?b:m;if("[object String]"===Object.prototype.toString.call(a))return b=z(a,b),f?b?b.content:[]:n(b?b.content:[],a);if("[object RegExp]"===Object.prototype.toString.call(a)){var e=[],c;for(c in b)if(c.match(a))for(g=0;g<b[c].content.length;g++)e.push(b[c].content[g]);return f?e:n(e,a)}if("[object Array]"===
Object.prototype.toString.call(a)){e=[];var g;for(g=0;g<a.length;g++){var k=z(a[g],b);if(null!==k)for(c=0;c<k.content.length;c++)e.push(k.content[c])}return f?e:n(e,a)}if("[object Null]"===Object.prototype.toString.call(a)){e=[];for(c in b)for(g=0;g<b[c].content.length;g++)e.push(b[c].content[g]);return f?e:n(e,a)}return null},handleSelection:function(a,b,f,e){if("[object String]"===Object.prototype.toString.call(a)||"[object RegExp]"===Object.prototype.toString.call(a)||"[object Array]"===Object.prototype.toString.call(a))return a=
l.getHandler(a,f,e),b?a.has(b):a;h.import(a)}},n=function(a,b,f,e){var c=function(a,b){var d,g,k=[];for(d=0;d<c.e.length;d++)if(c.e[d].children){var e=l.handleSelection(a,b,c.e[d].children,!0);for(g=0;g<e.length;g++)k.push(e[g])}return n(k,a,null,c.e)};c.e=a;c.eLength=a.length;c.set=function(a,k,d){if("number"===typeof d){if(this.e[d].indexElem.type===h.ruleType.fontFace)return console.log('Element of Type "'+h.ruleType.names[this.e[d].indexElem.type]+'" is readonly.'),this;if(this.e[d].children)l.getHandler(null,
this.e[d].children).set(a,k);else if("[object Function]"===Object.prototype.toString.call(k)){var g=l.findPropInCssText(this.e[d].indexElem.cssText,a);g=k(g);this.e[d].indexElem.style[a]=l.parseValue(g);this.e[d].indexElem.style._update[a]=k}else this.e[d].indexElem.style[a]=l.parseValue(k)}else{var c,x,m=Object.prototype.toString.call(a);"[object Object]"===m?g=Object.keys(a).length:"[object Function]"===m&&(x=a());if(0>=this.e.length&&!f&&"[object String]"===Object.prototype.toString.call(b)){if(e){var n=
[];for(d=0;d<e.length;d++){var p=q(b,null,null,e[d].indexElem,e[d].children);for(c=0;c<p.content.length;c++)n.push(p.content[c])}}else p=q(b,null,null),n=p.content;this.e=n;this.eLength=n.length}for(d=0;d<this.e.length;d++)if("[object Object]"===m&&0<g)for(c in a)this.set(c,a[c],d);else if("[object Function]"===m){for(c in x)this.set(c,x[c],d);this.e[d].indexElem._update=a}else this.set(a,k,d)}return this};c.get=function(a,b){var d=[],e="",c,g;b=!!b;for(g=0;g<this.e.length;g++)if(c=l.findPropInCssText(this.e[g].indexElem.cssText,
a))e=c,b&&d.push(e);return b?d:e};c.has=function(a){var e=[],d;if("[object String]"===Object.prototype.toString.call(a)){var c=a.split(":");for(d=0;d<this.e.length;d++){var g=l.findPropInCssText(this.e[d].indexElem.cssText,c[0]);""!==g&&(!c[1]||c[1]&&c[1].replace(/ |;/g,"")===g)&&e.push(this.e[d])}}else if("[object Array]"===Object.prototype.toString.call(a))for(var f=0;f<a.length;f++)for(c=a[f].split(":"),d=0;d<this.e.length;d++)g=l.findPropInCssText(this.e[d].indexElem.cssText,c[0]),""!==g&&(!c[1]||
c[1]&&c[1].replace(/ |;/g,"")===g)&&e.push(this.e[d]);else if("[object RegExp]"===Object.prototype.toString.call(a))for(d=0;d<this.e.length;d++)if(c=this.e[d].indexElem.cssText.match(/[\S]+:.+?;/g))for(f=0;f<c.length;f++)(g=c[f].match(a))&&e.push(this.e[d]);return n(e,b,!0)};c.update=function(){var a,b;for(a=0;a<this.e.length;a++){if(!1!==this.e[a].indexElem._update){var d=this.e[a].indexElem._update();for(b in d)this.set(b,d[b],a)}if(this.e[a].children)l.getHandler(null,this.e[a].children).update();
else for(b in this.e[a].indexElem.style._update)d=this.e[a].indexElem.style._update[b](),this.set(b,d,a)}return this};c.delete=function(a){var c;if("undefined"===typeof a)for(c=0;c<this.e.length;c++){this.e[c].indexElem.parentRule?this.e[c].indexElem.parentRule.deleteRule(this.e[c]):this.e[c].indexElem.parentStyleSheet.deleteRule(this.e[c]);var d=this.e[c].parent?this.e[c].parent:null;d=d?d:m;d[b]&&delete d[b];this.e[c].children&&(d=l.getHandler(null,this.e[c].children),d.delete(a))}else for(c=0;c<
this.e.length;c++)this.e[c].indexElem.style[a]="",this.e[c].children&&(d=l.getHandler(null,this.e[c].children),d.delete(a));return this};c.export=function(a){var b="",c;for(c=0;c<this.e.length;c++)b+=l.exportParser(this.e[c].indexElem.cssText,a);return b.trim()};return c};h=function(a,b){return l.handleSelection(a,b)};h.import=function(a){var b;for(b in a){var f=a[b];if("[object Array]"===Object.prototype.toString.call(f))for(var e=0;e<f.length;e++)if("@font-face"===b)q(b,f[e],null);else{var c=q(b,
null,null);c=n(c.content,b);c.set(f[e])}else"@font-face"===b?q(b,f,null):(c=q(b,null,null),c=n(c.content,b),c.set(f))}};h.export=function(a){var b="",f,e;for(f in m)for(e=0;e<m[f].content.length;e++)b+=l.exportParser(m[f].content[e].indexElem.cssText,a);return b.trim()};h.update=function(a){if(a)a=h(a),a.update();else for(var b in m)a=n(m[b].content),a.update()};h.ruleType={rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,
names:{1:"rule",2:"charset",3:"import",4:"media",5:"fontFace",6:"page",7:"keyframes",8:"keyframe",10:"namespace",11:"counterStyle",12:"supports",14:"fontFeatureValues"}};h.events={beforeChange:"beforechange",change:"change",beforeSet:"beforeset",set:"set",beforeCreate:"beforecreate",create:"create",beforeDelete:"beforedelete","delete":"delete",beforeDestroy:"beforedestroy",destroy:"destroy"};h.export.type={normal:"normal",ruleRow:"ruleRow",min:"min"};h.conf={styleId:"cssc-style"};r?w():window.addEventListener("load",
function(){w()});return h};_debug&&(csscDebug.cntrl=r);return r(document.styleSheets,!0)}();
