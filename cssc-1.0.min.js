/*
@version 1.0b
@author m13p4
@copyright Meliantchenkov Pavel
*/
var _debug=!0,csscDebug={},CSSC=function(){var v,u=function(p,u){var m={},w=!1,g=null;_debug&&(csscDebug.index=m);var y=function(){if(!w){if("cssRules"in p)x(p.cssRules);else if("length"in p)for(var a=0;a<p.length;a++)"true"!==p[a].ownerNode.getAttribute("data-cssc-ignore")&&x(p[a].cssRules);w=!0}},x=function(a,b){for(var f=0;f<a.length;f++)l.isElemInOwnNode(a[f])||A(a[f],b)},A=function(a,b){var f=a.cssText.substr(0,a.cssText.indexOf("{")).trim(),d=a.type,c=b?b:m;if(d!==g.ruleType.rule&&d!==g.ruleType.fontFace&&
d!==g.ruleType.media&&d!==g.ruleType.keyframes&&d!==g.ruleType.keyframe)console.log("unsuported type: ["+d+"] - "+g.ruleType.names[d]);else{a._update=!1;d===g.ruleType.rule&&(a.style._update={});b={indexElem:a,children:!1,parent:b?b:!1,events:{},type:d};c[f]?(c[f].content[0].indexElem===a&&(console.log('Dublicate "'+f+'": '),console.log(Error().stack+"\n\n")),b=c[f].content.push(b)-1):(c[f]={type:d,content:[b],events:{}},b=0);if(d===g.ruleType.media||d===g.ruleType.keyframes)c[f].content[b].children=
{},x(a.cssRules,c[f].content[b].children,!1);return c[f]}},r=function(a,b,f,d,c){d||v||l.createNewStyleElem();d=d?d:v.sheet;var e=d.cssRules.length,k="";if(b){var h=l.elemType(b);if("Object"===h)for(var q in b)"Function"===l.elemType(b[q])?(f=b[q](),k+=q+":"+f+"; "):k+=q+":"+b[q]+"; ";else if("Function"===h)for(q in f=b(),f)k+=q+":"+f[q]+"; ";else k=b+":"+f+";"}"insertRule"in d?d.insertRule(a+"{"+k+"}",e):"appendRule"in d?d.appendRule(a+"{"+k+"}",e):"addRule"in d&&d.addRule(a,k,e);return A(d.cssRules[e],
c)},B=function(a,b){w||y();b=b?b:m;return b[a]?b[a]:null},t=function(a,b,f){b=b?b:m;var d=l.elemType(a);if("String"===d)return b=B(a,b),f?b?b.content:[]:n(b?b.content:[],a);if("RegExp"===d){d=[];for(var c in b)if(c.match(a))for(e=0;e<b[c].content.length;e++)d.push(b[c].content[e]);return f?d:n(d,a)}if("Array"===d){d=[];var e;for(e=0;e<a.length;e++){var k=B(a[e],b);if(null!==k)for(c=0;c<k.content.length;c++)d.push(k.content[c])}return f?d:n(d,a)}if("Null"===d||"Undefined"===d){d=[];for(c in b)for(e=
0;e<b[c].content.length;e++)d.push(b[c].content[e]);return f?d:n(d,a)}return null},C=function(a,b,f,d){var c=l.elemType(a);if("String"===c||"RegExp"===c||"Array"===c||"Null"===c||"Undefined"===c)return a=t(a,f,d),b?a.has(b):a;g.import(a)},n=function(a,b,f,d){var c=function(a,b){var e,d,k=[];for(e=0;e<c.e.length;e++)if(c.e[e].children){var f=C(a,b,c.e[e].children,!0);for(d=0;d<f.length;d++)k.push(f[d])}return n(k,a,null,c.e)};c.e=a;c.eLength=a.length;c.set=function(a,k,h){if("number"===typeof h){if(this.e[h].indexElem.type===
g.ruleType.fontFace)return console.log('Element of Type "'+g.ruleType.names[this.e[h].indexElem.type]+'" is readonly.'),this;if(this.e[h].children)t(null,this.e[h].children).set(a,k);else if("Function"===l.elemType(k)){var e=l.findPropInCssText(this.e[h].indexElem.cssText,a);e=k(e);this.e[h].indexElem.style[a]=l.parseValue(e);this.e[h].indexElem.style._update[a]=k}else this.e[h].indexElem.style[a]=l.parseValue(k)}else{var c,z,m=l.elemType(a);"Object"===m?e=Object.keys(a).length:"Function"===m&&(z=
a());if(0>=this.e.length&&!f&&"String"===l.elemType(b)){if(d){var n=[];for(h=0;h<d.length;h++){var p=r(b,null,null,d[h].indexElem,d[h].children);for(c=0;c<p.content.length;c++)n.push(p.content[c])}}else p=r(b,null,null),n=p.content;this.e=n;this.eLength=n.length}for(h=0;h<this.e.length;h++)if("Object"===m&&0<e)for(c in a)this.set(c,a[c],h);else if("Function"===m){for(c in z)this.set(c,z[c],h);this.e[h].indexElem._update=a}else this.set(a,k,h)}return this};c.get=function(a,b){var e=[],d="",c,f;b=!!b;
for(f=0;f<this.e.length;f++)(c=this.e[f].indexElem.style[a])&&""!==c||(c=l.findPropInCssText(this.e[f].indexElem.cssText,a)),c&&(d=c,b&&e.push(d));return b?e:d};c.has=function(a){var d=[];var e=l.elemType(a);if("String"===e){var c=a.split(":");for(e=0;e<this.e.length;e++){var f=l.findPropInCssText(this.e[e].indexElem.cssText,c[0]);""!==f&&(!c[1]||c[1]&&c[1].replace(/ |;/g,"")===f)&&d.push(this.e[e])}}else if("Array"===e)for(var g=0;g<a.length;g++)for(c=a[g].split(":"),e=0;e<this.e.length;e++)f=l.findPropInCssText(this.e[e].indexElem.cssText,
c[0]),""!==f&&(!c[1]||c[1]&&c[1].replace(/ |;/g,"")===f)&&d.push(this.e[e]);else if("RegExp"===e)for(e=0;e<this.e.length;e++)if(c=this.e[e].indexElem.cssText.match(/[\S]+:.+?;/g))for(g=0;g<c.length;g++)(f=c[g].match(a))&&d.push(this.e[e]);return n(d,b,!0)};c.update=function(){var a,b;for(a=0;a<this.e.length;a++){if(!1!==this.e[a].indexElem._update){var c=this.e[a].indexElem._update();for(b in c)this.set(b,c[b],a)}if(this.e[a].children)t(null,this.e[a].children).update();else for(b in this.e[a].indexElem.style._update)c=
this.e[a].indexElem.style._update[b](),this.set(b,c,a)}return this};c.delete=function(a){var c;if("undefined"===typeof a)for(c=0;c<this.e.length;c++){this.e[c].indexElem.parentRule?this.e[c].indexElem.parentRule.deleteRule(this.e[c]):this.e[c].indexElem.parentStyleSheet.deleteRule(this.e[c]);var d=this.e[c].parent?this.e[c].parent:null;d=d?d:m;d[b]&&delete d[b];this.e[c].children&&(d=t(null,this.e[c].children),d.delete(a))}else for(c=0;c<this.e.length;c++)this.e[c].indexElem.style[a]="",this.e[c].children&&
(d=t(null,this.e[c].children),d.delete(a));return this};c.export=function(a){var c="",b;for(b=0;b<this.e.length;b++)c+=l.exportParser(this.e[b].indexElem.cssText,a);return c.trim()};return c},l={elemType:function(a,b){return b?Object.prototype.toString.call(a):Object.prototype.toString.call(a).replace(/(^\[.+\s|\]$)/g,"")},createNewStyleElem:function(){if(document.getElementById(g.conf.styleId)){for(var a=0;10>a;a++)if(!document.getElementById(g.conf.styleId+"-"+a)){g.conf.styleId=g.conf.styleId+
"-"+a;break}if(document.getElementById(g.conf.styleId))throw Error("cann not create new element..");}a=document.createElement("style");a.setAttribute("type","text/css");a.setAttribute("id",g.conf.styleId);a.appendChild(document.createTextNode(""));document.head.appendChild(a);v=a},isElemInOwnNode:function(a){return a&&!!a.parentStyleSheet&&!!a.parentStyleSheet.ownerNode&&a.parentStyleSheet.ownerNode.id===g.conf.styleId},parseValue:function(a){if(isFinite(a))return 0===a%1?a+"px":Math.floor(100*a)/
100+"px";var b=a.split(" ");if(0<b.length){for(var f=0;f<b.length;f++)isFinite(b[f])&&(a=b[f],b[f]=0===a%1?a+"px":Math.floor(100*a)/100+"px");return b.join(" ")}return a},findPropInCssText:function(a,b){return(a=a.match(new RegExp(b+"s*:s*(.+?);")))?a[1].trim():""},exportParser:function(a,b){return b===g.export.type.ruleRow?a.replace(/\n/g,"")+"\n":b===g.export.type.min?a.replace(/(;|:|\s*?{|}|,)\s+/g,function(a){return a.trim()}):a.match(/^@(media|keyframes)/)?a.replace(/^(.*){([\s\S]*)}$/,function(a,
b,c){return b+"\n{\n    "+c.trim().replace(/({|}|;)\s*/g,function(a){a=a.trim();if("{"===a)return"\n    {\n        ";if("}"===a)return"}\n    ";if(";"===a)return";\n        "}).replace(/\s+}/g,"\n    }").trim()+"\n}\n"}):a.replace(/({|}|;)\s*/g,function(a){a=a.trim();if("{"===a)return"\n"+a+"\n    ";if("}"===a)return a+"\n";if(";"===a)return a+"\n    "}).replace(/\s+}/,"\n}")}};g=function(a,b){return C(a,b)};g.import=function(a){var b,f;for(b in a){var d="Array"===l.elemType(a[b])?a[b]:[a[b]];for(var c=
0;c<d.length;c++)if("@font-face"===b)r(b,d[c],null);else if(b.match(/^@(media|keyframes)/)){var e=r(b,null,null);n(e.content,b);for(f in d[c]){var g=r(f,null,null,e.content[e.content.length-1].indexElem,e.content[e.content.length-1].children);g=n(g.content,f);g.set(d[c][f])}}else e=r(b,null,null),e=n(e.content,b),e.set(d[c])}};g.export=function(a){var b="",f,d;for(f in m)for(d=0;d<m[f].content.length;d++)b+=l.exportParser(m[f].content[d].indexElem.cssText,a);return b.trim()};g.update=function(a){if(a)a=
g(a),a.update();else for(var b in m)a=n(m[b].content),a.update()};g.ruleType={rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,names:{1:"rule",2:"charset",3:"import",4:"media",5:"fontFace",6:"page",7:"keyframes",8:"keyframe",10:"namespace",11:"counterStyle",12:"supports",14:"fontFeatureValues"}};g.events={beforeChange:"beforechange",change:"change",beforeSet:"beforeset",set:"set",beforeCreate:"beforecreate",
create:"create",beforeDelete:"beforedelete","delete":"delete",beforeDestroy:"beforedestroy",destroy:"destroy"};g.export.type={normal:"normal",ruleRow:"ruleRow",min:"min"};g.conf={styleId:"cssc-style"};u?y():window.addEventListener("load",function(){y()});return g};_debug&&(csscDebug.cntrl=u);return u(document.styleSheets,!0)}();
