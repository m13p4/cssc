/* CSSC.js | @version 1.0b |  m13p4 */
var CSSC=function(u){function r(c,a){c='"'+a.style_id+'"/'+c.replace(/^.+?:/,function(a){return(a+"    ").slice(0,7)});a.view_err&&console.log(c);S.push(c)}function m(c,a){var b=Object.prototype.toString.call(c).split(/ |\]/)[1];"Number"===b&&(b=Math.floor(c)===c?"Integer":"Float");return a?b:ca[b]||b}function K(c,a){for(var b in a)da(c,b,{enumerable:!0,value:a[b]})}function y(c,a,b){var d=m(c),f=5===d,e=f&&c.match(/^0x[0-9a-f\.\+]+$/i);if(isFinite(c)||e){b=(b[4].parse_unit_default||"px")+"";var g=
c;e?(d=c.search(/\.|\+/),0>d?g=parseInt(c):(f=c.substr(d+1),g=parseInt(c.substr(0,d))+("+"===c.charAt(d)?parseFloat(f):parseInt(f,16)/Math.pow(16,f.length))),d=m(g)):f&&(g=parseFloat(c),d=m(g));e||/(^|-)color$/i.test(a)?(c=g,f=0,4===d&&(c=Math.floor(g),f=g-c),c=[(c&16711680)>>16,(c&65280)>>8,c&255].join(", "),c=0<f?"rgba("+c+", "+Math.floor(100*f)/100+")":"rgb("+c+")"):c=3===d?g+b:Math.floor(100*g)/100+b}else if(f&&-1<c.indexOf(" ")){c=c.split(" ");for(d=0;d<c.length;d++)c[d]=y(c[d],a,b);c=c.join(" ")}else f&&
"!"===c.charAt(c.length-1)&&(c=c.substr(0,c.length-1));return c}function A(c,a,b,d,f){b=5===m(b)?b:Array((parseInt(b)||2)+1).join(" ");var e="",g,h=m(c);d=d||"";if(5===h)return c;if(7===h)for(h=0;h<c.length;h++)e+=A(c[h],a,b,d,!0);else for(g in c){var l=""+c[g];h=m(c[g]);if(7===h||8===h)if(f&&7===h){var k=A(c[g],a,b,d+b,f);""!==k&&(e=a?e+(g.replace(/\s*(,|:)\s*/g,"$1")+"{"+k+"}"):e+(d+g.replace(/\s*,\s*/g,",\n"+d)+" {\n"+k+d+"}\n"))}else for(8===h&&(l=[c[g]]),h=0;h<l.length;h++)-1<z.indexOf(g)?e+=
g+" "+l[h]+";"+(a?"":"\n"):(k=A(l[h],a,b,d+b,f),""!==k&&(e=a?e+(g.replace(/\s*(,|:)\s*/g,"$1")+"{"+k+"}"):e+(d+g.replace(/\s*,\s*/g,",\n"+d)+" {\n"+k+d+"}\n")));else e=-1<z.indexOf(g)?e+(g+" "+l+";"+(a?"":"\n")):a?e+(g+":"+l.trim().replace(/\s*,\s*/g,",")+";"):e+((d.length<b.length?b:d)+g+": "+l+";\n")}return e}function T(c){if(/^@(namespace|import|charset)/.test(c))return c.replace(/(^@.*\s+|\s*;\s*$)/g,"");var a=c.replace(/(^.*?{\s*|\s*}\s*$)/g,"");c=a.split(";");var b={};if(""!==a)for(a=0;a<c.length;a++)if(""!==
c[a]){var d=c[a].split(":");b[d[0].trim()]=d.slice(1).join(":").trim()}return b}function U(c){var a=c.split("-"),b;c=a[0];for(b=1;b<a.length;b++)c+=a[b].charAt(0).toUpperCase()+a[b].substr(1);return c}function G(c){c=c.trim();if("@"!==c.charAt(0))return 1;c=c.substr(1);var a=c.indexOf(" ");-1<a&&(c=c.substr(0,a));return L[U(c)]||-1}function M(c,a){"@"===a.charAt(0)&&"@"===c.charAt(0)&&(a=a.substr(1));a="/"===a.charAt(0)?a.substr(1):","===a.charAt(0)?", "+a.substr(1).trim():" "+a;if(0<=c.indexOf(",")||
0<a.indexOf(",")){c=c.split(",");var b,d="",f=a.split(",");if(","!==a.charAt(0))for(b=0;b<c.length;b++)for(a=0;a<f.length;a++)d+=c[b]+f[a]+", ";else for(b=0;b<c.length;b++)d+=c[b]+a+", ";return d.replace(/,+\s*$/,"")}return c+a}function V(c){var a=c.parentRule?c.parentRule:c.parentStyleSheet,b;for(b=0;b<a.cssRules.length;b++)if(a.cssRules[b]===c){a.deleteRule(b);break}}function B(c,a){c||(c="");for(var b=c.lastIndexOf("$"),d=0,f,e,g,h,l,k,n=a[4].parse_vars_limit||100,p=a[3]||{};0<=b&&d<n;){d++;f=
null;h=c.substr(b+1);a=h.search(/[^\w\.]/);a=0>a?c.length:a+b;l=c.substr(b+1,a-b);k=l.split(".");for(e=0;e<k.length;e++)if(!(1>k[e].length)){g=m(f);if(0===e&&k[e]in p)f=p[k[e]];else if((7===g||8===g)&&k[e]in f)f=f[k[e]];else if(5===g&&k[e].match(/^[0-9]+$/))f=f.charAt(k[e]);else{f="$"+l;break}if(9===m(f)){if("("===c.charAt(a+1)){a++;g=h=a;do g=c.indexOf("(",g+1),a=c.indexOf(")",a+1);while(-1<g&&g<a);0>a&&(a=c.length);h=c.substr(h+1,a-h-1);h=h.trim().split(/\s*,\s*/);f=f.apply(null,h)}else f=f();if("."===
c.charAt(a+1))for(a++,g=a,h=c.substr(a+1),a=h.search(/[^\w\.]/),h=h.substr(0,0>a?h.length:a),a=0>a?c.length:a+g,l=c.substr(b+1,a-b),h=h.split("."),g=0;g<h.length;g++)k.push(h[g])}}c=c.substr(0,b)+f+c.substr(a+1);a="$"+l===f?b:a+(f.length-1);if(0>--a)break;b=c.lastIndexOf("$",a)}return c}function W(c,a,b){for(var d=0;d<a.length;d++)a[d]&&a[d].parentStyleSheet&&a[d].parentStyleSheet.ownerNode&&a[d].parentStyleSheet.ownerNode.id!==c[4].style_id&&C(c,a[d],b)}function C(c,a,b,d){var f=a.cssText.substr(0,
a.cssText.indexOf("{")).trim(),e=a.type,g=b?b.c:c[0],h=0,l=4===e||7===e||12===e;if(1!==e&&5!==e&&4!==e&&7!==e&&8!==e&&6!==e&&12!==e&&10!==e&&3!==e&&2!==e)return r('index:Unsuported "'+f+'" ['+e+"]",c[4]);10===e&&(f=z[2]);3===e&&(f=z[1]);2===e&&(f=z[0]);b={_s:d||f,s:f,e:a,t:e,o:{},n:c[2]++,c:l?{}:!1,p:b||!1,uo:!1,up:{}};g[f]?h=g[f].e.push(b)-1:g[f]={t:e,e:[b]};l?W(c,a.cssRules,g[f].e[h]):g[f].e[h].o=T(a.cssText);return b}function v(c,a,b,d,f){var e="",g=!1;if(!f&&!c[1])if(t)c[1]=!0;else{var h=c[4].style_id;
if(u.getElementById(h)){for(var l=0;10>l;l++)if(!u.getElementById(h+"-"+l)){h=h+"-"+l;break}u.getElementById(h)&&r("crElem:can't create element.",c[4])}l=u.createElement("style");l.setAttribute("type","text/css");l.setAttribute("id",h);u.head.appendChild(l);c[1]=l;c[4].style_id=h}h=f?f.e:c[1].sheet;if(b)if(l=m(b),8===l)for(var k in b)9===m(b[k])?(d=b[k](),e+=k+":"+y(d,k,c)+"; "):e+=k+":"+y(b[k],k,c)+"; ";else if(9===l)for(k in d=b(),d)e+=k+":"+y(d[k],k,c)+"; ";else e=b+":"+y(d,k,c)+";";k=a+"{"+e+
"}";-1<z.indexOf(a)&&(k=a+" "+b);if(t)return C(c,{cssText:k,type:G(a),cssRules:{},style:{}},f,a);try{var n=h.cssRules.length;"insertRule"in h?h.insertRule(k,n):"appendRule"in h?h.appendRule(k,n):"addRule"in h&&h.addRule(a,e,n);g=C(c,h.cssRules[n],f,a)}catch(ea){r("create:"+(f?'"'+f.s+'" > ':"")+'"'+a+'" -> '+ea,c[4])}return g||C(c,{cssText:k,type:G(a),placeholder:!0,cssRules:{},style:{}},f,a)}function X(c,a,b){if(c&&c[a]){var d=b?c[a].e.indexOf(b):-1;b?0<=d&&(c[a].e.splice(d,1),0>=c[a].e.length&&
delete c[a]):delete c[a]}}function D(c,a,b){var d=m(a),f=7===m(c)?c[0]:c;if(5===d)return a=B(a,c),b?f[a]?f[a].e:[]:w(c,f[a]?f[a].e:[],a);if(6===d){d=[];for(var e in f)if(e.match(a))for(g=0;g<f[e].e.length;g++)d.push(f[e].e[g]);return b?d:w(c,d,a)}if(7===d){d=[];var g;for(g=0;g<a.length;g++){var h=B(a[g],c);if(f[h])for(e=0;e<f[h].e.length;e++)d.push(f[h].e[e])}return b?d:w(c,d,a)}if(1===d||2===d){d=[];for(e in f)for(g=0;g<f[e].e.length;g++)d.push(f[e].e[g]);return b?d:w(c,d,a)}}function E(c,a,b,d){var f=
m(a);if(-1<[5,6,7,1,2].indexOf(f))return D(c,a,b);H(c,a);return d}function H(c,a,b,d){var f,e,g={};7!==m(a)&&(a=[a]);if(!d&&!b){var h=!1;for(e=0;e<q.length;e++)for(f=0;f<a.length;f++)if(q[e]in a[f]){h=!0;d=g[q[e]];var l=a[f][q[e]];l=7===m(l)?l:[l];g[q[e]]=d?d.concat(l):l}h&&H(c,g,b,h)}for(f=0;f<a.length;f++)for(k in d=a[f],d)if(!(k in g)){l=7===m(d[k])?d[k]:[d[k]];var k=B(k,c);for(e=0;e<l.length;e++)if("@"===k.charAt(0))if(-1<q.indexOf(k))v(c,k,l[e],null,b);else if(b&&(4===b.t||7===b.t||12===b.t)||
/^@(media|keyframes|supports)/.test(k)){var n=k;(h=b)&&!k.match(/^@(media|keyframes|supports)/)&&(k=M(b._s,k),h=b.p);h=v(c,k,null,null,h);h&&h.s===h._s||(h&&(V(h.e),X(h.p?h.p:c[0],h.s,h)),h={cssText:k+" {}",placeholder:!0,type:G(k),cssRules:{}},h=C(c,h,h.p,k));H(c,l[e],h);b&&(b.o[n]||(b.o[n]=[]),b.o[n].push(h))}else r('import:Unsuported "'+k+'" ['+G(k)+"]",c[4]);else-1<[5,4,3].indexOf(m(l[e]))?(h=b?b.c:c[0],h["*"]||v(c,"*",null,null,b),p(c,[h["*"].e[0]],k,l[e])):(h=v(c,k,null,null,b))&&p(c,[h],l[e])}}
function p(c,a,b,d,f){if(3===m(f)){if(!t&&-1<fa.indexOf(a[f].t))return r('set:Readonly rule "'+a[f].s+'" ['+a[f].t+"]",c[4]);b=B(b,c);if(a[f].c)p(c,D(a[f].c,null,!0),b,d);else{var e=m(d),g;if(8===e||7===e){var h="@"===b.charAt(0);var l=8===e?[d]:d,k=M(a[f].s,b);h&&(k=a[f].p?M(a[f].p.s,b):b);for(g=0;g<l.length;g++)if(e=v(c,k,null,null,h?!1:a[f].p))h&&(d=e,(e=v(c,a[f].s,null,null,e))||(e=d)),p(c,[e],l[g]),h&&a[f].p&&(d=a[f].p,7!==m(d.o[b])&&(d.o[b]=[]),d.o[b].push(e.p)),7!==m(a[f].o[b])&&(a[f].o[b]=
[]),a[f].o[b].push(e)}else if(9===e)try{l=d(b,F(c,[a[f]],b)),p(c,a,b,l,f),a[f].up[b]=d}catch(n){r("set:"+n,c[4])}else{h=y(d,b,c);if(b in c[5])for(d=0;d<c[5][b].length;d++)p(c,a,c[5][b][d],h,f);if(!t){if(b in I)for(d=0;d<I[b].length;d++){if(I[b][d]in a[f].e.style){g=I[b][d];break}}else g=U(b);g!==b&&(a[f].e.style[g]=h);a[f].e.style[b]=h}a[f].o[b]=h}}}else if(e=m(b),7===e)for(g=0;g<b.length;g++)if(a.length>g)p(c,[a[g]],b[g]);else break;else for(g=0;g<a.length;g++)if(8===e)for(h in b)p(c,a,h,b[h],g);
else if(9===e){f=b(a[g].s,F(c,[a[g]])[a[g].s]);for(h in f)p(c,a,h,f[h],g);a[g].uo=b}else p(c,a,b,d,g)}function F(c,a,b,d){if(!b)return x(c,a,3);var f=d?[]:"",e;for(e=0;e<a.length;e++){var g="";a[e].o[b]&&(g=a[e].o[b],7===m(g)&&(g=x(c,g,3)));t||(g&&""!==g||(g=a[e].e.style[b]),g&&""!==g||(g=(g=a[e].e.cssText.match(new RegExp(b+"s*:s*(.+?);")))?g[1].trim():""));g&&(d?f.push(g):f=g)}return f}function x(c,a,b,d){3!==m(b)&&(b=ha[b]||3);var f={},e,g,h,l,k=b;if(1===b||2===b)b=4;d||(d=[]);for(e=0;e<a.length;e++)if(0>
d.indexOf(a[e])){if(-1<ia.indexOf(a[e].t))var n=a[e].o;else for(h in n=J({},a[e].o),a[e].o)if(7===m(a[e].o[h]))if(5===b||4===b)n[h]=null,delete n[h];else{n[h]=[];for(g=0;g<a[e].o[h].length;g++)0>d.indexOf(a[e].o[h][g])&&(d.push(a[e].o[h][g]),(l=x(c,[a[e].o[h][g]],b,d)[a[e].o[h][g].s])&&0<Y(l).length&&(n[h][g]=l));0===n[h].length?delete n[h]:1===n[h].length&&(n[h]=n[h][0])}else 1!==k&&2!==k&&isFinite(a[e].o[h])&&(n[h]+="!");a[e].c&&(n=J(x(c,D(a[e].c,null,!0),b,d),n));1>Y(n).length||(4===b?(f[a[e].n]=
{},f[a[e].n][a[e].s]=n):f[a[e].s]?(7!==m(f[a[e].s])&&(f[a[e].s]=[f[a[e].s]]),f[a[e].s].push(n)):f[a[e].s]=n,d.push(a[e]))}if(4===b)return f=ja(f),b===k?f:A(f,2===k,c[4].parse_tab);c={};l=!1;for(e=0;e<q.length;e++)f[q[e]]&&(c[q[e]]=f[q[e]],l=!0);if(l)for(e in f)c[e]||(c[e]=f[e]);return l?c:f}function Z(c,a){var b,d;for(b=0;b<a.length;b++){if(!1!==a[b].uo){var f=a[b].uo(a[b].s,F(c,[a[b]])[a[b].s]);for(d in f)p(c,a,d,f[d],b)}if(a[b].c)Z(c,D(a[b].c,null,!0));else for(d in a[b].up)p(c,a,d,a[b].up[d](d,
F(c,[a[b]],d)),b)}}function N(c,a,b,d){var f=-1<[1,2].indexOf(m(b)),e,g=[];for(e=0;e<a.length;e++)a[e].c&&N(c,D(a[e].c,null,!0),b,d),f?(V(a[e].e),X(a[e].p?a[e].p:c[0],a[e].s,a[e])):(g.push(a[e]),t||(a[e].e.style[b]=""),a[e].o[b]&&(7===m(a[e].o[b])&&N(c,a[e].o[b]),delete a[e].o[b]));d&&(d.e=O(c,g))}function P(c,a,b,d,f){0>b&&(b+=a.length);return a[b]?w(c,[a[b]],d,!1,a[b].p||!1):w(c,[],d,!1,f)}function O(c,a){for(var b=[],d=0;d<a.length;d++)a[d].e&&b.push(t||a[d].e.placeholder?x(c,[a[d]],3):a[d].e);
return b}function aa(c,a,b,d){var f=m(a);if(8===f)J(c,a);else if(5===f){if(2===m(b))return c[a];c[a]=b}else{if(7===f){b={};for(d=0;d<a.length;d++)b[a[d]]=c[a[d]];return b}if(2===f)return c}return d}function w(c,a,b,d,f){function e(){if(1>a.length&&!d&&5===m(b)){var e,l=[],k,n=f?f:[null];for(k=0;k<n.length;k++)(e=v(c,b,null,null,n[k]))&&l.push(e);a=l;g.e=O(c,a);g.selector=1===a.length?a[0].s:b}}var g=function(b){var d,f,g=[];e();for(d=0;d<a.length;d++)if(a[d].c){var h=E(a[d].c,b,!0);for(f=0;f<h.length;f++)g.push(h[f])}return w(c,
g,b,null,a)};g.e=O(c,a);g.selector=1===a.length?a[0].s:b;K(g,{set:function(b,d){e();p(c,a,b,d);return g},get:function(b,d){return F(c,a,b,d)},update:function(){Z(c,a);return g},"delete":function(b){N(c,a,b,g);return g},"export":function(b){return x(c,a,b)},parse:function(b){return x(c,a,b?2:1)},pos:function(d){return P(c,a,d,b,f)},first:function(){return P(c,a,0,b,f)},last:function(){return P(c,a,-1,b,f)}});return g}function Q(){var c=[{},!1,0,{},{},{}],a=function(b){try{return E(c,b,!1,a)}catch(d){r("CSSC:"+
d,c[4])}};K(a,{version:"1.0.0",init:function(b){b=7===m(b)?b:[b];for(var d=0;d<b.length;d++){var f=!1;var e=m(b[d],1);if(b[d]){b[d]=b[d].sheet||b[d];e=b[d].href||e;try{f=b[d].cssRules||f}catch(h){e+='" -> "'+h}if(!f&&9===m(b[d])){if(b[d].e&&7===m(b[d].e)){f=b[d].e;var g="handler"}else"1.0.0"===b[d].version&&b[d].type===L?(f=b[d]().e,g="ID:"+b[d].conf().style_id):g=b[d].name;e=(f?"CSSC":e)+"["+g+"]"}}f&&0<f.length?W(c,f,null):r("init:Can't init from \""+e+'"',c[4])}return a},"import":function(b){H(c,
b);return a},"export":function(a){return E(c).export(a)},parse:function(a){return E(c).parse(a)},update:function(b){E(c,b).update();return a},"new":function(){return Q()},alias:function(b,d){var f=c[5],e=m(b),g;5===e&&(e={},e[b]=d,b=e,e=8);if(8===e)for(g in b)for(e=b[g],7!==m(e)&&(e=[e]),(g in f)||(f[g]=[]),d=0;d<e.length;d++)f[g].push(e[d]);return a},conf:function(b,d){return aa(c[4],b,d,a)},vars:function(b,d){return aa(c[3],b,d,a)},parseVars:function(a,d){return B(a,[0,0,0,d?J({},c[3],d):c[3],c[4]])},
objFromCss:function(a){return T(a)},cssFromObj:function(a,c,f){return A(a,c,f)},_conf:ba,type:L,type_export:ka,messages:S});return a.conf(ba)}var fa=[2,3,10,5],q=["@charset","@import","@namespace","@font-face"],z=q.slice(0,3),ia=[2,3,10],S=[],ca={Null:1,Undefined:2,Integer:3,Float:4,String:5,RegExp:6,Array:7,Object:8,Function:9},t=8===m(u),I={float:["cssFloat"]},J=9===m(Object.assign)?Object.assign:function(){var c,a,b=arguments;for(a=1;a<b.length;a++)for(c in b[a])b[0][c]=b[a][c];return b[0]},da=
9===m(Object.defineProperty)?Object.defineProperty:function(c,a,b){c[a]=b.value},la=9===m(Object.preventExtensions),R=9===m(Object.freeze)?Object.freeze:function(c){var a={};K(a,c);c=a;la&&Object.preventExtensions(c);return c},Y=9===m(Object.keys)?Object.keys:function(c){var a=[],b;for(b in c)a.push(b);return a},ja=9===m(Object.values)?Object.values:function(c){var a=[],b;for(b in c)a.push(c[b]);return a},L=R({rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,
counterStyle:11,supports:12,fontFeatureValues:14,viewport:15}),ha={css:1,min:2,obj:3,object:3,arr:4,array:4,objNMD:5},ka=R({css:"css",min:"min",obj:"obj",arr:"arr",object:"object",notMDObject:"objNMD",array:"array"}),ba=R({style_id:"cssc-style",view_err:!0,parse_tab:2,parse_unit_default:"px",parse_vars_limit:100});if(t)u.exports=Q();else return Q()}("undefined"===typeof module?document:module);
