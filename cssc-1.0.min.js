/* CSSC.js | @version 1.0b |  m13p4 */
var CSSC=function(w){function r(){for(var b=arguments,a=1;a<b.length;a++)if(b[0]===b[a])return!0;return!1}function u(b,a){a=a[4];b='"'+a.style_id+'"/'+b.replace(/^.+?:/,function(a){return(a+"    ").slice(0,7)});a.view_err&&console.log(b);V.push(b)}function n(b,a){var c=Object.prototype.toString.call(b).split(/ |\]/)[1];"Number"!==c||a||(c=Math.floor(b)===b?3:4);return a?c:ea[c]||c}function M(b,a){for(var c in a)fa(b,c,{enumerable:!0,value:a[c]})}function z(b,a,c){var d=n(b),e=5===d,f=e&&b.match(/^0x[0-9a-f\.\+]+$/i);
if(f||isFinite(b)){c=(c[4].parse_unit_default||"px")+"";var g=b;f?(d=b.search(/\.|\+/),0>d?g=parseInt(b):(e=b.substr(d+1),g=parseInt(b.substr(0,d))+("+"===b.charAt(d)?parseFloat(e):parseInt(e,16)/Math.pow(16,e.length))),d=n(g)):e&&(g=parseFloat(b),d=n(g));f||/(^|-)color$/i.test(a)?(b=g,e=0,4===d&&(b=Math.floor(g),e=g-b),b=[(b&16711680)>>16,(b&65280)>>8,b&255].join(", "),b=0<e?"rgba("+b+", "+Math.floor(100*e)/100+")":"rgb("+b+")"):b=3===d?g+c:Math.floor(100*g)/100+c}else if(e&&-1<b.indexOf(" ")){b=
b.split(" ");for(d=0;d<b.length;d++)b[d]=z(b[d],a,c);b=b.join(" ")}else e&&"!"===b.charAt(b.length-1)&&(b=b.substr(0,b.length-1));return b}function B(b,a,c,d,e){c=c||2;c=5===n(c)?c:Array(parseInt(c)+1).join(" ");var f="",g,h=n(b),l=/\s*,\s*/g,m=/\s*(,|:)\s*/g;d=d||"";if(5===h)return b;if(7===h)for(h=0;h<b.length;h++)f+=B(b[h],a,c,d,!0);else for(g in b){var k=b[g];h=n(b[g]);if(r(h,7,8))if(e&&7===h){var p=B(b[g],a,c,d+c,e);""!==p&&(f=a?f+(g.replace(m,"$1")+"{"+p+"}"):f+(d+g.replace(l,",\n"+d)+" {\n"+
p+d+"}\n"))}else for(8===h&&(k=[b[g]]),h=0;h<k.length;h++)-1<A.indexOf(g)?f+=g+" "+k[h]+";"+(a?"":"\n"):(p=B(k[h],a,c,d+c,e),""!==p&&(f=a?f+(g.replace(m,"$1")+"{"+p+"}"):f+(d+g.replace(l,",\n"+d)+" {\n"+p+d+"}\n")));else f=-1<A.indexOf(g)?f+(g+" "+k+";"+(a?"":"\n")):a?f+(g+":"+k.trim().replace(l,",")+";"):f+((d.length<c.length?c:d)+g+": "+k+";\n")}return f}function W(b){if(/^@(namespace|import|charset)/.test(b))return b.replace(/(^@.*\s+|\s*;\s*$)/g,"");var a=b.replace(/(^.*?{\s*|\s*}\s*$)/g,"");
b=a.split(";");var c={};if(""!==a)for(a=0;a<b.length;a++)if(""!==b[a]){var d=b[a].split(":");c[d[0].trim()]=d.slice(1).join(":").trim()}return c}function X(b){var a=b.split("-"),c;b=a[0];for(c=1;c<a.length;c++)b+=a[c].charAt(0).toUpperCase()+a[c].substr(1);return b}function N(b){b=b.trim();if("@"!==b.charAt(0))return 1;b=b.substr(1);var a=b.indexOf(" ");-1<a&&(b=b.substr(0,a));return O[X(b)]||-1}function P(b,a){"@"===a.charAt(0)&&"@"===b.charAt(0)&&(a=a.substr(1));a="/"===a.charAt(0)?a.substr(1):
","===a.charAt(0)?", "+a.substr(1).trim():" "+a;if(0<=b.indexOf(",")||0<a.indexOf(",")){b=b.split(",");var c,d="",e=a.split(",");if(","!==a.charAt(0))for(c=0;c<b.length;c++)for(a=0;a<e.length;a++)d+=b[c]+e[a]+", ";else for(c=0;c<b.length;c++)d+=b[c]+a+", ";return d.replace(/,+\s*$/,"")}return b+a}function Y(b){var a=b.parentRule?b.parentRule:b.parentStyleSheet,c;for(c=0;c<a.cssRules.length;c++)if(a.cssRules[c]===b){a.deleteRule(c);break}}function C(b,a){b||(b="");for(var c=b.lastIndexOf("$"),d=0,
e,f,g,h,l,m,k=a[4].parse_vars_limit||100,p=a[3]||{};0<=c&&d<k;){d++;e=null;h=b.substr(c+1);a=h.search(/[^\w\.]/);a=0>a?b.length:a+c;l=b.substr(c+1,a-c);m=l.split(".");for(f=0;f<m.length;f++)if(!(1>m[f].length)){g=n(e);if(0===f&&m[f]in p)e=p[m[f]];else if(r(g,7,8)&&m[f]in e)e=e[m[f]];else if(5===g&&m[f].match(/^[0-9]+$/))e=e.charAt(m[f]);else{e="$"+l;break}if(9===n(e)){if("("===b.charAt(a+1)){a++;g=h=a;do g=b.indexOf("(",g+1),a=b.indexOf(")",a+1);while(-1<g&&g<a);0>a&&(a=b.length);h=b.substr(h+1,a-
h-1);h=h.trim().split(/\s*,\s*/);e=e.apply(null,h)}else e=e();if("."===b.charAt(a+1))for(a++,g=a,h=b.substr(a+1),a=h.search(/[^\w\.]/),h=h.substr(0,0>a?h.length:a),a=0>a?b.length:a+g,l=b.substr(c+1,a-c),h=h.split("."),g=0;g<h.length;g++)m.push(h[g])}}b=b.substr(0,c)+e+b.substr(a+1);a="$"+l===e?c:a+(e.length-1);if(0>--a)break;c=b.lastIndexOf("$",a)}return b}function Z(b,a,c){for(var d=0;d<a.length;d++)!t&&a[d]&&a[d].parentStyleSheet&&a[d].parentStyleSheet.ownerNode&&a[d].parentStyleSheet.ownerNode.id!==
b[4].style_id&&I(b,a[d],c)}function I(b,a,c,d){var e=a.cssText.substr(0,a.cssText.indexOf("{")).trim(),f=a.type,g=c?c.c:b[0],h=0,l=r(f,4,7,12);if(!r(f,1,5,4,7,8,6,12,10,3,2))return u('index:Unsuported "'+e+'" ['+f+"]",b);10===f&&(e=A[2]);3===f&&(e=A[1]);2===f&&(e=A[0]);d={_s:d||e,s:e,e:a,t:f,o:{},n:0,c:l?{}:!1,p:c||!1,io:!1,uo:!1,up:{}};l?Z(b,a.cssRules,d):d.o=W(a.cssText);a=b[2].push(d)-1;d.n=a;c||(b[6][a]=d);do g[e]?g[e].e.push(a):g[e]={t:f,e:[a]},c&&(h++,e=c.s+" >> "+e,g=b[0]);while(1===h);return d}
function x(b,a,c,d,e){var f="",g=!1;if(!e&&!b[1])if(t)b[1]=!0;else{var h=b[4].style_id;if(w.getElementById(h))for(var l=0;10>l;l++)if(!w.getElementById(h+"-"+l)){h=h+"-"+l;break}w.getElementById(h)?u("create:can't create element.",b):(l=w.createElement("style"),l.setAttribute("type","text/css"),l.setAttribute("id",h),w.head.appendChild(l),b[1]=l,b[4].style_id=h)}h=e?e.e:b[1].sheet;if(c)if(l=n(c),8===l)for(var m in c)9===n(c[m])?(d=c[m](),f+=m+":"+z(d,m,b)+"; "):f+=m+":"+z(c[m],m,b)+"; ";else if(9===
l)for(m in d=c(),d)f+=m+":"+z(d[m],m,b)+"; ";else f=c+":"+z(d,m,b)+";";m=a+"{"+f+"}";-1<A.indexOf(a)&&(m=a+" "+c);if(!t)try{var k=h.cssRules.length;"insertRule"in h?h.insertRule(m,k):"appendRule"in h?h.appendRule(m,k):"addRule"in h&&h.addRule(a,f,k);g=I(b,h.cssRules[k],e,a)}catch(p){u("create:"+(e?'"'+e.s+'" > ':"")+'"'+a+'" -> '+p,b)}return g||I(b,{cssText:m,type:N(a),placeholder:!t,cssRules:{},style:{}},e,a)}function aa(b,a,c){if(b&&b[a]){var d=c?b[a].e.indexOf(c):-1;c?0<=d&&(b[a].e.splice(d,1),
0>=b[a].e.length&&delete b[a]):delete b[a]}}function D(b,a){7!==n(a)&&(a=[a]);b=b[2];for(var c={},d=0;d<a.length;d++)b[a[d]]&&(c[a[d]]=b[a[d]]);return c}function E(b,a,c,d){var e=n(c),f=!a;a=f?b[0]:a.c;var g=[];if(5===e)c=C(c,b),a[c]&&(g=a[c].e);else if(6===e)for(var h in a){if(c.test(h))for(e=0;e<a[h].e.length;e++)g.push(a[h].e[e])}else if(7===e)for(e=0;e<c.length;e++){if(f=C(c[e],b),a[f])for(h=0;h<a[f].e.length;h++)g.push(a[f].e[h])}else if(r(e,1,2)){if(f)return d?b[6]:J(b,b[6]);for(h in a)for(e=
0;e<a[h].e.length;e++)g.push(a[h].e[e])}g=D(b,g);return d?g:J(b,g,c)}function F(b,a,c,d){var e=n(a);if(r(e,5,6,7,1,2))return E(b,!1,a,c);K(b,a);return d}function K(b,a,c,d){var e,f,g={},h=/^@(media|keyframes|supports)/;7!==n(a)&&(a=[a]);if(!d&&!c){var l=!1;for(f=0;f<v.length;f++)for(e=0;e<a.length;e++)if(v[f]in a[e]){l=!0;d=g[v[f]];var m=a[e][v[f]];m=7===n(m)?m:[m];g[v[f]]=d?d.concat(m):m}l&&K(b,g,c,l)}for(e=0;e<a.length;e++)for(k in d=a[e],d)if(!(k in g)){m=7===n(d[k])?d[k]:[d[k]];var k=C(k,b);for(f=
0;f<m.length;f++)if("@"===k.charAt(0))if(-1<v.indexOf(k))x(b,k,m[f],null,c);else if(c&&r(c.t,4,7,12)||h.test(k)){var p=k;(l=c)&&!k.match(h)&&(k=P(c._s,k),l=c.p);l=x(b,k,null,null,l);l&&l.s===l._s||(l&&(Y(l.e),aa(l.p?l.p:b[0],l.s,l)),l={cssText:k+" {}",placeholder:!0,type:N(k),cssRules:{}},l=I(b,l,l.p,k));K(b,m[f],l);c&&(l.io=!0,c.o[p]||(c.o[p]=[]),c.o[p].push(l.n))}else u('import:Unsuported "'+k+'" ['+N(k)+"]",b);else r(n(m[f]),5,4,3)?(l=c?c.c:b[0],l["*"]||x(b,"*",null,null,c),q(b,D(b,l["*"].e),k,
m[f])):(l=x(b,k,null,null,c))&&q(b,[l],m[f])}}function q(b,a,c,d,e,f){if(a[e]){if(r(a[e].t,2,3,10,5))return u('set:Readonly rule "'+a[e].s+'" ['+a[e].t+"]",b);c=C(c,b);if(a[e].c)q(b,E(b,a[e],null,!0),c,d,!1,f);else{var g=n(d);if(r(g,8,7)){var h="@"===c.charAt(0);var l=8===g?[d]:d,m=P(a[e].s,c);!f&&h&&(m=a[e].p?P(a[e].p.s,c):c);for(g=0;g<l.length;g++)if(f&&7===n(a[e].o[c]))q(b,D(b,a[e].o[c]),l[g],!1,!1,f);else{var k=x(b,m,null,null,h?!1:a[e].p);!f&&k&&(h&&(d=k,(k=x(b,a[e].s,null,null,k))||(k=d)),q(b,
[k],l[g],!1,!1,f),h&&a[e].p&&(d=a[e].p,7!==n(d.o[c])&&(d.o[c]=[]),d.o[c].push(k.p.n)),k.io=!0,7!==n(a[e].o[c])&&(a[e].o[c]=[]),a[e].o[c].push(k.n))}}else if(9===g)try{l=d(c,G(b,[a[e]],c)),q(b,a,c,l,e,f),f||(a[e].up[c]=d)}catch(p){u("set:"+p,b)}else{g=z(d,c,b);if(c in b[5])for(d=0;d<b[5][c].length;d++)q(b,a,b[5][c][d],g,e,f);if(!t){if(c in L)for(d=0;d<L[c].length;d++){if(L[c][d]in a[e].e.style){h=L[c][d];break}}else h=X(c);h!==c&&(a[e].e.style[h]=g);a[e].e.style[c]=g}a[e].o[c]=g}}}else if(h=n(c),7===
h)for(g=0;g<c.length;g++)if(a.length>g)q(b,[a[g]],c[g]);else break;else for(g in a)if(8===h)for(k in c)q(b,a,k,c[k],g,f);else if(9===h){e=c(a[g].s,G(b,[a[g]])[a[g].s]);for(k in e)q(b,a,k,e[k],g,f);f||(a[g].uo=c)}else q(b,a,c,d,g,f)}function G(b,a,c,d){if(!c)return y(b,a,3);var e=d?[]:"",f;for(f in a){var g="";a[f].o[c]&&(g=a[f].o[c],7===n(g)&&(g=y(b,D(b,g),3)));t||(g||(g=a[f].e.style[c]),g||(g=(g=a[f].e.cssText.match(new RegExp(c+"s*:s*(.+?);")))?g[1].trim():""));g&&(d?e.push(g):e=g)}return e}function y(b,
a,c,d,e){3!==n(c)&&(c=ha[c]||3);var f,g,h=c,l={},m=r(c,1,2);if(m){var k="";h=5}else k=4===c?[]:{};d||(d=[]);for(f in a)if(0>d.indexOf(f)){if(r(a[f].t,2,3,10))var p=a[f].o;else for(g in p=H({},a[f].o),a[f].o)7===n(a[f].o[g])?3!==c?(p[g]=null,delete p[g]):p[g]=y(b,D(b,a[f].o[g]),c,d,!0):1!==c&&2!==c&&isFinite(a[f].o[g])&&(p[g]+="!");a[f].c&&(p=H(y(b,E(b,a[f],null,!0),h,d),p));if(!(1>ia(p).length)){if(m||4===c){var q={};q[a[f].s]=p;m?k+=B(q,2===c,b[4].parse_tab):k.push(q)}else q=0>v.indexOf(a[f].s)?
k:l,q[a[f].s]?(7!==n(q[a[f].s])&&(q[a[f].s]=[q[a[f].s]]),q[a[f].s].push(p)):q[a[f].s]=p;d.push(f)}}if(m||4===c)return k;k=H(l,k);if(e){q=!1;b=0;for(f in k)if(b++,1===b)q=k[f];else break;if(1===b)return q}return k}function ba(b,a){var c,d;for(c in a){if(!1!==a[c].uo){var e=a[c].uo(a[c].s,G(b,[a[c]])[a[c].s]);for(d in e)q(b,a,d,e[d],c,!0)}if(a[c].c)ba(b,E(b,a[c],null,!0));else for(d in a[c].up)q(b,a,d,a[c].up[d](d,G(b,[a[c]],d)),c,!0)}}function Q(b,a,c,d){var e=r(n(c),1,2),f,g=[];for(f in a)a[f].c&&
Q(b,E(b,a[f],null,!0),c,d),e?(Y(a[f].e),aa(a[f].p?a[f].p:b[0],a[f].s,a[f])):(g.push(a[f]),t||(a[f].e.style[c]=""),a[f].o[c]&&(7===n(a[f].o[c])&&Q(b,a[f].o[c]),delete a[f].o[c]));d&&(d.e=R(b,g))}function S(b,a,c,d,e){0>c&&(c+=ja(a).length);var f,g=0,h={};for(f in a){if(c===g){h[f]=a[f];break}g++}return J(b,h,d,!1,e)}function R(b,a){var c=[],d;for(d in a)c.push(t||a[d].e.placeholder?y(b,[a[d]],3):a[d].e);return c}function ca(b,a,c,d){var e=n(a);if(8===e)H(b,a);else if(5===e){if(2===n(c))return b[a];
b[a]=c}else{if(7===e){c={};for(d=0;d<a.length;d++)c[a[d]]=b[a[d]];return c}if(2===e)return b}return d}function J(b,a,c,d,e){function f(){if(1>a.length&&!d&&5===n(c)){var f,l=[],m,k=e?e:[null];for(m=0;m<k.length;m++)(f=x(b,c,null,null,k[m]))&&l.push(f);a=l;g.e=R(b,a);g.selector=1===a.length?a[0].s:c}}var g=function(c){var d,e,g=[];f();for(d in a)if(a[d].c){var h=F(a[d].c,c,!0);for(e=0;e<h.length;e++)g.push(h[e])}return J(b,g,c,null,a)};g.e=R(b,a);g.selector=1===a.length?a[0].s:c;M(g,{set:function(c,
d){f();q(b,a,c,d);return g},get:function(c,d){return G(b,a,c,d)},update:function(){ba(b,a);return g},"delete":function(c){Q(b,a,c,g);return g},"export":function(c){return y(b,a,c)},parse:function(c){return y(b,a,c?2:1)},pos:function(d){return S(b,a,d,c,e)},first:function(){return S(b,a,0,c,e)},last:function(){return S(b,a,-1,c,e)}});return g}function T(){var b=[{},!1,[],{},{},{},{}],a=function(c){try{return F(b,c,!1,a)}catch(d){u("CSSC:"+d,b)}};M(a,{version:"1.0.0",init:function(c){c=7===n(c)?c:[c];
for(var d=0;d<c.length;d++){var e=!1;var f=n(c[d],1);if(c[d]){c[d]=c[d].sheet||c[d];f=c[d].href||f;try{e=c[d].cssRules||e}catch(h){f+='" -> "'+h}if(!e&&9===n(c[d])){if(c[d].e&&7===n(c[d].e)){e=c[d].e;var g="handler"}else"1.0.0"===c[d].version&&c[d].type===O?(e=c[d]().e,g="ID:"+c[d].conf().style_id):g=c[d].name;f=(e?"CSSC":f)+"["+g+"]"}}e&&0<e.length?Z(b,e,null):u("init:Can't init from \""+f+'"',b)}return a},"import":function(c){K(b,c);return a},"export":function(a){return F(b).export(a)},parse:function(a){return F(b).parse(a)},
update:function(c){F(b,c).update();return a},"new":function(){return T()},alias:function(c,d){var e=b[5],f=n(c),g;5===f&&(f={},f[c]=d,c=f,f=8);if(8===f)for(g in c)for(f=c[g],7!==n(f)&&(f=[f]),(g in e)||(e[g]=[]),d=0;d<f.length;d++)e[g].push(f[d]);return a},conf:function(c,d){return ca(b[4],c,d,a)},vars:function(c,d){return ca(b[3],c,d,a)},parseVars:function(a,d){return C(a,[,,,d?H({},b[3],d):b[3],b[4]])},objFromCss:function(a){return W(a)},cssFromObj:function(a,b,e){return B(a,b,e)},_conf:da,type:O,
type_export:ka,messages:V});return a.conf(da)}var v=["@charset","@import","@namespace","@font-face"],A=v.slice(0,3),V=[],ea={Null:1,Undefined:2,Integer:3,Float:4,String:5,RegExp:6,Array:7,Object:8,Function:9},t=8===n(w),L={float:["cssFloat"]},H=9===n(Object.assign)?Object.assign:function(){var b,a,c=arguments;for(a=1;a<c.length;a++)for(b in c[a])c[0][b]=c[a][b];return c[0]},fa=9===n(Object.defineProperty)?Object.defineProperty:function(b,a,c){b[a]=c.value},la=9===n(Object.preventExtensions),U=9===
n(Object.freeze)?Object.freeze:function(b){var a={};M(a,b);b=a;la&&Object.preventExtensions(b);return b},ia=9===n(Object.keys)?Object.keys:function(b){var a=[],c;for(c in b)a.push(c);return a},ja=9===n(Object.values)?Object.values:function(b){var a=[],c;for(c in b)a.push(b[c]);return a},O=U({rule:1,charset:2,"import":3,media:4,fontFace:5,page:6,keyframes:7,keyframe:8,namespace:10,counterStyle:11,supports:12,fontFeatureValues:14,viewport:15}),ha={css:1,min:2,obj:3,object:3,arr:4,array:4,objNMD:5},
ka=U({css:"css",min:"min",obj:"obj",arr:"arr",object:"object",notMDObject:"objNMD",array:"array"}),da=U({style_id:"cssc-style",view_err:!0,parse_tab:2,parse_unit_default:"px",parse_vars_limit:100});if(t)w.exports=T();else return T()}("undefined"===typeof module?document:module);
